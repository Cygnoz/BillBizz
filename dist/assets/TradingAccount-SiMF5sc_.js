import{r as l,u as F,Z as A,j as e,L as p,x as P,w as v,e as $,_ as B}from"./index-A_edQTkL.js";import{P as L}from"./PrinterIcon-wSfdPfNy.js";import{C}from"./Calender-CLJNzzsH.js";function m(s){return new Date(s).toLocaleDateString("en-GB").split("/").join("-")}function I(){const s=new Date;return`${s.getFullYear()}-${(s.getMonth()+1).toString().padStart(2,"0")}-01`}function O(){const s=new Date;return new Date(s.getFullYear(),s.getMonth()+1,0).toISOString().split("T")[0]}const M=()=>{var b,y;const[s,g]=l.useState([]),{request:D}=F("get",5006),[i,w]=l.useState(I()),[d,S]=l.useState(O()),j=l.useRef(null),N=l.useRef(null),{organization:h}=A(),E=()=>{var t;(t=j.current)==null||t.showPicker()},k=()=>{var t;(t=N.current)==null||t.showPicker()},u=m(i),f=m(d),T=async()=>{try{const t=`${$.GET_TRADING_ACCONUT}/${u}/${f}`,{response:o,error:r}=await D(t);!r&&o&&g(o.data.data)}catch(t){B.error("Error in fetching trading data."),console.error("Error in fetching trading data",t)}};return l.useEffect(()=>{localStorage.setItem("fromDate",u),localStorage.setItem("toDate",f)},[i,d]),l.useEffect(()=>{T()},[]),e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex justify-start items-center mb-6 ",children:[e.jsx(p,{to:"/reports",children:e.jsx("div",{className:"flex justify-center items-center h-11 w-11 bg-tertiary_main rounded-full",children:e.jsx(P,{})})}),e.jsx("div",{className:"flex justify-start item-start ms-2",children:e.jsx("h4",{className:"font-bold text-xl text-textColor",children:"Trading Account"})}),e.jsx("div",{className:"ml-auto gap-3 flex items-center",children:e.jsxs("div",{className:"flex text-dropdownText gap-4",children:[e.jsxs("div",{className:"relative border-2 border-slate-200 flex rounded-md px-2 py-1 text-sm items-center cursor-pointer bg-white",onClick:E,children:[e.jsx("div",{className:"pointer-events-none flex items-center px-2 text-gray-700",children:e.jsx(C,{color:"currentColor",height:18,width:18})}),m(i),e.jsx("div",{className:"pointer-events-none flex items-center px-2 text-gray-700",children:e.jsx(v,{color:"gray"})}),e.jsx("input",{type:"date",ref:j,className:"absolute inset-0 opacity-0 cursor-pointer",value:i,onChange:t=>w(t.target.value)})]}),e.jsxs("div",{className:"relative border-2 border-slate-200 flex rounded-md px-2 py-1 text-sm items-center cursor-pointer bg-white",onClick:k,children:[e.jsx("div",{className:"pointer-events-none flex items-center px-2 text-gray-700",children:e.jsx(C,{color:"currentColor",height:18,width:18})}),m(d),e.jsx("div",{className:"pointer-events-none flex items-center px-2 text-gray-700",children:e.jsx(v,{color:"gray"})}),e.jsx("input",{type:"date",ref:N,className:"absolute inset-0 opacity-0 cursor-pointer",value:d,onChange:t=>S(t.target.value)})]}),e.jsx("div",{className:"ml-auto flex items-center",children:e.jsxs("button",{className:"flex border px-2 py-1 border-gray-300 rounded-lg bg-secondary_active",children:[e.jsx(L,{color:"gray",height:18,width:20}),e.jsx("span",{className:"text-sm text-neutral-500",children:"Print"})]})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("div",{className:"flex justify-center items-center mb-2",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"font-bold text-textColor",children:["            ",h==null?void 0:h.organizationName]}),e.jsxs("p",{className:"text-sm text-textColor",children:[u," To ",f]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:" text-textColor   mb-4",children:"Debit"}),e.jsx("div",{className:"overflow-hidden ",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"flex items-center text-[#585953] font-semibold justify-center rounded-md py-2 bg-[#F7ECD9] me-5 ",children:"Particulars"}),e.jsx("th",{className:"items-center text-[#585953] font-semibold justify-center rounded-md py-2 bg-[#F7ECD9]",children:"Amount"})]})}),e.jsxs("tbody",{className:"divide-y divide-[#EAECF0]",children:[(b=s==null?void 0:s.debit)==null?void 0:b.map((t,o)=>{let r="",n=0,c=[],a="";if(t.openingStock)r="Opening Stock",n=t.openingStock.total,c=t.openingStock,a=`/reports/trading-account/${r}`;else if(t.purchases){const x="purchases";r="Purchases",n=t.purchases.overallNetDebit-t.purchases.overallNetCredit,c=t,a=`/reports/trading-account/accounts/${x}`,console.log(t,"purchase")}else if(t.directExpenses){const x="directExpenses";r="Direct Expenses",n=t.directExpenses.overallNetDebit-t.directExpenses.overallNetCredit,c=t,a=`/reports/trading-account/accounts/${x}`}else t.grossProfit&&(r="Gross Profit",n=t.grossProfit);return n===0&&(a=""),e.jsxs("tr",{className:o===(s==null?void 0:s.debit.length)-1?"font-semibold bg-gray-50":"",children:[e.jsx("td",{className:"px-6 py-3 text-sm text-[#4B5C79] font-medium",children:e.jsx(p,{to:a,state:{items:c},children:r})}),e.jsx("td",{className:"px-6 py-3 text-right text-sm text-[#4B5C79] font-medium",children:n})]},o)}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-3  text-sm text-[#4B5C79] font-bold",children:"Total"}),e.jsx("td",{className:"px-6 py-3 text-right  text-sm text-[#4B5C79] font-bold",children:s.finalDebit})]})]})]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"",children:e.jsx("h3",{className:"text-textColor text-end  mb-4",children:"Credit"})})," ",e.jsx("div",{className:"overflow-hidden ",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"flex items-center text-[#585953] font-semibold justify-center rounded-md py-2 bg-[#F7ECD9] mx-5",children:"Particulars"}),e.jsx("th",{className:"items-center text-[#585953] font-semibold justify-center rounded-md py-2 bg-[#F7ECD9]",children:"Amount"})]})}),e.jsxs("tbody",{className:"divide-y divide-[#EAECF0] ",children:[(y=s==null?void 0:s.credit)==null?void 0:y.map((t,o)=>{let r="",n=0,c=[],a="";if(t.sales){const x="sales";r="Sales",n=t.sales.overallNetCredit-t.sales.overallNetDebit,c=t,a=`/reports/trading-account/accounts/${x}`}else t.closingStock?(r="Closing Stock",n=t.closingStock.total,c=t.closingStock,a=`/reports/trading-account/${r}`):t.grossLoss&&(r="Gross Loss",n=t.grossLoss);return n===0&&(a=""),e.jsxs("tr",{className:o===(s==null?void 0:s.credit.length)-1?"font-semibold bg-gray-50":"",children:[e.jsx(p,{to:a,state:{items:c,fromDate:i,toDate:d},children:e.jsx("td",{className:"px-6 py-3 text-sm text-[#4B5C79] font-medium",children:r})}),e.jsx("td",{className:"px-6 py-3 text-right text-sm text-[#4B5C79] font-medium",children:n})]},o)}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-3  text-sm text-[#4B5C79] font-bold",children:"Total"}),e.jsx("td",{className:"px-6 py-3 text-right  text-sm text-[#4B5C79] font-bold",children:s.finalCredit})]})]})]})})]})]})]})]})};export{M as default};

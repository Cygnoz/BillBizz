import{r as a,ac as k,u as N,j as e,y as T,M as B,B as E,e as f,_ as p,I as D,ad as _,T as I}from"./index-A_edQTkL.js";import{b as S,N as R}from"./NewUnit-D3n73ESX.js";import{u as U}from"./inventory-DcYHUaR5.js";import{T as q}from"./TableSkelton-L9YeclyQ.js";import{N as M}from"./NoDataFoundTable-hmwFq4Ia.js";import"./NO_DATA-Bek3dUYY.js";const $=({unit:d,onUpdate:y})=>{const[o,c]=a.useState(!1),{setEditUnitResponse:b}=a.useContext(k),[r,m]=a.useState({unitName:"",symbol:"",quantityCode:"",precision:""}),{request:v}=N("put",5003),{request:C}=N("get",5003),u=i=>{const{name:l,value:t}=i.target;m({...r,[l]:t})},w=()=>{c(!0),x()},h=()=>{c(!1)},x=async()=>{try{const i=`${f.GET_ONE_UNIT}/${d._id}`,{response:l,error:t}=await C(i);!t&&l?m(l.data):p.error(t.response.data.message)}catch(i){console.error(i)}},j=async i=>{i.preventDefault();try{const l=`${f.UPDATE_UNIT}/${d._id}`,t=r,{response:s,error:n}=await v(l,t);!n&&s?(p.success(s.data.message),y(s.data),c(!1),b(g=>({...g,...t}))):p.error(n.response.data.message)}catch(l){console.error(l)}};return a.useEffect(()=>{o&&x()},[o]),e.jsxs("div",{children:[e.jsx("button",{onClick:w,className:"flex items-center",children:e.jsx(T,{color:"blue"})}),e.jsx(B,{open:o,onClose:h,style:{width:"39%"},children:e.jsxs("div",{className:"p-5 mt-3 text-start",children:[e.jsxs("div",{className:"mb-5 flex p-4 rounded-xl bg-CreamBg relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 -right-8 w-[178px] h-[89px]",style:{backgroundImage:`url(${S})`,backgroundRepeat:"no-repeat"}}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-xl font-bold text-textColor",children:"Edit Unit of Measurement"}),e.jsxs("p",{className:"text-dropdownText font-semibold text-sm mt-2",children:["Quantify and manage the quantities of products"," "]})]}),e.jsx("div",{className:"ms-auto text-3xl cursor-pointer relative z-10",onClick:h,children:"Ã—"})]}),e.jsxs("form",{onSubmit:j,className:"",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Unit Name"}),e.jsx("input",{type:"text",name:"unitName",value:r.unitName,placeholder:"Name",onChange:u,className:"border-inputBorder w-full text-sm border rounded p-1.5 pl-2 h-10"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Symbol"}),e.jsx("input",{type:"text",name:"symbol",value:r.symbol,placeholder:"Symbol",onChange:u,className:"border-inputBorder w-full text-sm border rounded p-1.5 pl-2 h-10"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Unit Quantity"}),e.jsx("input",{type:"text",name:"quantityCode",value:r.quantityCode,placeholder:"Unit Quantity",onChange:u,className:"border-inputBorder w-full text-sm border rounded p-1.5 pl-2 h-10"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Unit Precision"}),e.jsx("input",{type:"text",name:"precision",value:r.precision,placeholder:"Unit Precision",onChange:u,className:"border-inputBorder w-full text-sm border rounded p-1.5 pl-2 h-10"})]}),e.jsxs("div",{className:"flex justify-end gap-2 mb-3",children:[e.jsx(E,{type:"submit",variant:"primary",size:"sm",children:"Save"}),e.jsx(E,{variant:"secondary",size:"sm",onClick:h,children:"Cancel"})]})]})]})})]})},L=({})=>{const[d,y]=a.useState(null),[o,c]=a.useState([]),b=a.useRef(null),{loading:r,setLoading:m}=a.useContext(D),{unitResponse:v}=a.useContext(_),{unitEditResponse:C}=a.useContext(k),{request:u}=N("get",5003),{request:w}=N("delete",5003),h=t=>{y(d===t?null:t)},x=t=>{b.current&&!b.current.contains(t.target)&&h(null)};a.useEffect(()=>(d!==null?document.addEventListener("mousedown",x):document.removeEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}),[d]);const j=async()=>{try{const t=`${f.GET_ALL_UNIT}`;m({...r,skeleton:!0});const{response:s,error:n}=await u(t);if(n||!s){m({...r,skeleton:!1,noDataFound:!0}),console.error("Error fetching units:",n);return}c(s.data),m({...r,skeleton:!1}),console.log(s)}catch(t){console.error("Error fetching tables:",t),m({...r,noDataFound:!0,skeleton:!1})}},i=async t=>{console.log(t);try{const s=`${f.DELETE_UNIT}/${t._id}`,{response:n,error:g}=await w(s);!g&&n?(p.success(n.data.message),o.length===1?c([]):j()):p.error(g.response.data.message)}catch{p.error("Error occurred while deleting Category.")}},l=t=>{c(s=>s.map(n=>n._id===t._id?t:n))};return a.useEffect(()=>{j()},[v,C]),e.jsx("div",{className:"bg-white p-5 mt-7 rounded-lg relative",children:e.jsx("div",{className:"rounded-lg border-2 border-tableBorder",children:e.jsxs("table",{className:"min-w-full bg-white relative pb-4",children:[e.jsx("thead",{className:"text-[12px] text-center text-dropdownText",children:e.jsx("tr",{className:"bg-lightPink",children:U.map((t,s)=>e.jsx("th",{className:"py-2 px-4 font-medium border-b border-tableBorder relative",children:t},s))})}),e.jsx("tbody",{className:"text-dropdownText text-center text-[13px] relative",children:r.skeleton?[...Array(o.length>0?o.length:5)].map((t,s)=>e.jsx(q,{columns:U},s)):o&&o.length>0?o.map((t,s)=>e.jsxs("tr",{className:"relative",children:[e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:s+1}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:t.unitName}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:t.symbol}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:t.quantityCode}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:t.precision?t.precision:"-"}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx($,{unit:t,onUpdate:l}),e.jsx("button",{onClick:()=>i(t),children:e.jsx(I,{color:"red"})})]})}),d===s&&e.jsx("div",{ref:b,className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:e.jsx("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"})})]},s)):e.jsx(M,{columns:U})})]})})})},G=({})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mx-5 my-4  h-[100vh]  gap-3",children:[e.jsxs("div",{className:"flex",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-2xl",children:"Unit Of Measurement"}),e.jsx("p",{className:"text-sm text-gray mt-1",children:"Define precise units of measurement to ensure accurate inventory tracking and product management."})]}),e.jsxs("div",{className:"ml-auto flex items-center",children:[e.jsx(R,{}),e.jsx("div",{className:"ms-5"})]})]}),e.jsx(L,{})]})," "]});export{G as default};

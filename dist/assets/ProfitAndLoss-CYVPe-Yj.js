import{Z as q,r as o,u as z,j as e,L as c,x as Z,w as I,e as H,_ as J}from"./index-A_edQTkL.js";import{C as S}from"./Calender-CLJNzzsH.js";import{F as K}from"./PrinterIcon-KI_KgC8l.js";function i(r){return new Date(r).toLocaleDateString("en-GB").split("/").join("-")}function Q(){const r=new Date;return`${r.getFullYear()}-${(r.getMonth()+1).toString().padStart(2,"0")}-01`}function U(){const r=new Date;return new Date(r.getFullYear(),r.getMonth()+1,0).toISOString().split("T")[0]}const ee=({})=>{var h,f,p,u,j,g,y,N,b,v,D,F,C,E,w,L;const{organization:r}=q(),[a,T]=o.useState(Q()),[n,k]=o.useState(U()),[t,R]=o.useState({debit:[],credit:[],summary:{}}),l=o.useRef(null),d=o.useRef(null),_=()=>{var s;(s=l.current)==null||s.showPicker()},m=i(a),x=i(n),G=()=>{var s;(s=d.current)==null||s.showPicker()},{request:O}=z("get",5006);console.log(t,"PLData");const $=async()=>{try{const s=i(a),A=i(n),M=`${H.GET_PL_DATA}/${s}/${A}`,Y=await O(M),{response:P,error:B}=Y;!B&&P?R(P.data.data):console.error("Error fetching Profit & Loss data:",B)}catch(s){console.error("Error in fetching Profit & Loss data:",s),J.error("Failed to fetch Profit & Loss data.")}};return o.useEffect(()=>{localStorage.setItem("fromDate",m),localStorage.setItem("toDate",x)},[a,n]),o.useEffect(()=>{$()},[a,n]),console.log("pl"),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsx(c,{to:"/reports",children:e.jsx("div",{className:"flex justify-center items-center h-11 w-11 bg-tertiary_main rounded-full",children:e.jsx(Z,{})})}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("h4",{className:"font-bold text-xl text-textColor",children:"Profit and Loss"})}),e.jsx("div",{className:"ml-auto gap-3 flex items-center",children:e.jsxs("div",{className:"flex text-dropdownText gap-4",children:[e.jsxs("div",{className:"relative border-2 border-slate-200 flex rounded-md px-2 py-1 text-sm items-center cursor-pointer",onClick:_,children:[e.jsx("div",{className:"pointer-events-none inset-y-0 flex items-center px-2 text-gray-700",children:e.jsx(S,{color:"currentColor",height:18,width:18})}),i(a),e.jsx("div",{className:"pointer-events-none inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(I,{color:"gray"})}),e.jsx("input",{type:"date",ref:l,className:"absolute inset-0 opacity-0 cursor-pointer",value:a,onChange:s=>T(s.target.value)})]}),e.jsxs("div",{className:"relative border-2 border-slate-200 flex rounded-md px-2 py-1 text-sm items-center cursor-pointer",onClick:G,children:[e.jsx("div",{className:"pointer-events-none inset-y-0 flex items-center px-2 text-gray-700",children:e.jsx(S,{color:"currentColor",height:18,width:18})}),i(n),e.jsx("div",{className:"pointer-events-none inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(I,{color:"gray"})}),e.jsx("input",{type:"date",ref:d,className:"absolute inset-1 opacity-0 cursor-pointer",value:n,onChange:s=>k(s.target.value)})]}),e.jsx("div",{className:"ml-auto flex items-center",children:e.jsxs("button",{className:"flex border px-2 py-1 border-gray-300 rounded-lg bg-secondary_active",children:[e.jsx(K,{color:"gray",height:18,width:20}),e.jsx("span",{className:"text-sm text-neutral-500",children:"Print"})]})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg my-4 p-5",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-lg font-bold text-textColor",children:r==null?void 0:r.organizationName}),e.jsxs("p",{className:"text-sm text-textColor",children:[m," To ",x]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center text-[#585953] font-semibold justify-center rounded-md py-2 bg-gradient-to-r from-[#E3E6D5] via-[#E3E6D5] to-[#F7E7CE]",children:"Particulars"}),e.jsx("table",{className:"w-full border-collapse",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-[#F4F4F4] text-[#4B5C79] font-medium text-sm",children:[e.jsx("td",{className:"py-4",children:"Gross Loss"}),e.jsx("td",{className:"py-4 text-right",children:((h=t.summary)==null?void 0:h.grossLoss)||0})]}),e.jsxs("tr",{className:"border-b border-[#F4F4F4] text-[#4B5C79] font-medium text-sm cursor-pointer hover:bg-gray-100",children:[e.jsx("td",{className:"py-4",children:e.jsx(c,{to:"/reports/profitandloss/groupsummary/indirectExpense",state:{data:(f=t==null?void 0:t.debit[0])==null?void 0:f.indirectExpenses},children:"Indirect Expense"})}),e.jsx("td",{className:"py-4 text-right",children:((u=(p=t.debit[0])==null?void 0:p.indirectExpenses)==null?void 0:u.overallNetDebit)-((g=(j=t.debit[0])==null?void 0:j.indirectExpenses)==null?void 0:g.overallNetCredit)||0})]}),e.jsxs("tr",{className:"border-b border-[#F4F4F4] text-[#4B5C79] font-medium text-sm",children:[e.jsx("td",{className:"py-4",children:"Net Profit"}),e.jsx("td",{className:"py-4 text-right",children:((y=t.summary)==null?void 0:y.netProfit)||0})]}),e.jsxs("tr",{className:"text-[#4B5C79] font-medium text-sm",children:[e.jsx("td",{className:"py-4"}),e.jsx("td",{className:"py-4 text-right",children:((N=t.summary)==null?void 0:N.finalDebit)||0})]})]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center font-bold justify-center text-[#585953] rounded-md py-2 bg-gradient-to-r from-[#FFE3B8] via-[#D5DCB3] to-[#D5DCB3]",children:"Particulars"}),e.jsx("table",{className:"w-full border-collapse",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-[#F4F4F4] text-[#4B5C79] font-medium text-sm",children:[e.jsx("td",{className:"py-4",children:"Gross Profit b/f"}),e.jsx("td",{className:"py-4 text-right",children:((b=t.credit[0])==null?void 0:b["Gross Profit (c/d)"])||0})]}),e.jsxs("tr",{className:"border-b border-[#F4F4F4] text-[#4B5C79] font-medium text-sm",children:[e.jsx("td",{className:"py-4",children:e.jsx(c,{to:"/reports/profitandloss/groupsummary/indirectIncome",state:{data:(v=t.credit[1])==null?void 0:v.indirectIncome},children:"Indirect Income"})}),e.jsx("td",{className:"py-4 text-right",children:((F=(D=t.credit[1])==null?void 0:D.indirectIncome)==null?void 0:F.overallNetCredit)-((E=(C=t.credit[1])==null?void 0:C.indirectIncome)==null?void 0:E.overallNetDebit)||0})]}),e.jsxs("tr",{className:"border-b border-[#F4F4F4] text-[#4B5C79] font-medium text-sm",children:[e.jsx("td",{className:"py-4",children:"Net Loss"}),e.jsx("td",{className:"py-4 text-right",children:((w=t.summary)==null?void 0:w.netLoss)||0})]}),e.jsxs("tr",{className:"text-[#4B5C79] font-medium text-sm",children:[e.jsx("td",{className:"py-4"}),e.jsx("td",{className:"py-4 text-right",children:((L=t.summary)==null?void 0:L.finalCredit)||0})]})]})})]})]})]})]})};export{ee as default};

import{j as e,$ as M,r as o,a as $,u as P,g as R,a1 as V,W as O,e as L,_ as E,E as q,T as z,aq as U,I as Y,af as G}from"./index-A_edQTkL.js";import{A as H,I as B}from"./client_5895553 2-C4qiIkYs.js";import{A as W}from"./Active clients-DUxSe5SI.js";import{v as J}from"./Vector-DJK6wySd.js";import{P as K}from"./Print-Cv7N6AYi.js";import{T as Q}from"./TableSkelton-L9YeclyQ.js";import{N as X}from"./NoDataFoundTable-hmwFq4Ia.js";import{P as Z}from"./PencilEdit-YyKjeo-p.js";import{E as ee}from"./EditSupplier-Ci11os7D.js";import"./PrinterIcon-wSfdPfNy.js";import"./NO_DATA-Bek3dUYY.js";const se=M("rounded-xl cursor-pointer",{variants:{active:{true:"bg-white border-cardBorder border-2",false:"bg-white border-gray-300"}},defaultVariants:{active:!1}}),te=({icon:i,title:m,description:x,number:f,active:u=!1,onClick:h})=>e.jsx("div",{className:`${se({active:u})} w-[50%] h-[70px] pl-4 pr-4 text-textColor`,onClick:h,children:e.jsxs("div",{className:"flex items-center justify-between w-full h-full",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:i,alt:""}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"text-base font-semibold",children:m}),e.jsx("p",{className:"text-xs",style:{color:u?"#495160":"#8F99A9"},children:x})]})]}),e.jsx("div",{className:"text-2xl font-bold",style:{backgroundImage:u?`url(${J})`:"none",backgroundSize:"cover",backgroundPosition:"center",width:"68px",height:"68px",display:"flex",alignItems:"center",justifyContent:"center"},children:f})]})});function le({all:i,active:m,inactive:x,duplicate:f,onCardClick:u}){const h=[{icon:H,title:"All Supplier",description:"Total Number of Suppliers",number:i,filter:null},{icon:W,title:"Active",description:"Active Count of Suppliers",number:m,filter:"Active"},{icon:B,title:"Inactive",description:"Inactive Count of Suppliers",number:x,filter:"Inactive"},{icon:B,title:"Duplicate",description:"Duplicate Count of Suppliers",number:f,filter:"Duplicate"}],[c,C]=o.useState(0),p=(r,d)=>{C(r),u(d)};return e.jsx("div",{className:"flex space-x-4 justify-center px-6 mt-2",children:h.map((r,d)=>e.jsx(te,{icon:r.icon,title:r.title,description:r.description,number:r.number,active:c===d,onClick:()=>p(d,r.filter)},d))})}const re=({supplierData:i,searchValue:m,setSearchValue:x,loading:f,refreshSuppliers:u})=>{const h=[{id:"supplierDisplayName",label:"Name",visible:!0},{id:"companyName",label:"Company Name",visible:!0},{id:"mobile",label:"Mobile",visible:!0},{id:"supplierEmail",label:"Email",visible:!0},{id:"supplierDetails",label:"Supplier details",visible:!0},{id:"billingPhone",label:"Billing Phone",visible:!0},{id:"billingCity",label:"Billing City",visible:!0},{id:"status",label:"Status",visible:!0},{id:"payables",label:"Payables(BCY)",visible:!1},{id:"unused",label:"Unused Credit(BCY)",visible:!1}],[c,C]=o.useState(h),[p,r]=o.useState(!1),[d,y]=o.useState(null),w=$(),g=s=>{w(`/supplier/view/${s}`)},D=s=>{y(s),r(!0)},A=()=>{r(!1),y(null)},j=i.filter(s=>{var n,S,k,I;const t=m.toLowerCase();return((n=s==null?void 0:s.supplierDisplayName)==null?void 0:n.toLowerCase().includes(t))||((S=s==null?void 0:s.companyName)==null?void 0:S.toLowerCase().includes(t))||((k=s==null?void 0:s.mobile)==null?void 0:k.toLowerCase().includes(t))||((I=s==null?void 0:s.supplierEmail)==null?void 0:I.toLowerCase().includes(t))}),[l,a]=o.useState(!1),[b,N]=o.useState(null),{request:v}=P("delete",5009),T=s=>{N(s),a(!0)},F=async()=>{if(b)try{const s=`${L.DELETE_SUPPLIER}/${b}`,{response:t,error:n}=await v(s);!n&&t?(E.success(t.data.message),u()):E.error(n.response.data.message)}catch{E.error("Error occurred while deleting.")}finally{a(!1),N(null)}},_=(s,t)=>{if(s==="supplierDetails")return e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[e.jsx("div",{onClick:()=>g(t._id),className:"cursor-pointer",children:e.jsx(q,{color:"#569FBC"})}),e.jsx("div",{onClick:()=>D(t),className:"cursor-pointer",children:e.jsx(Z,{color:"#0B9C56"})}),e.jsx("div",{onClick:()=>T(t._id),children:e.jsx(z,{color:"red"})})]});if(s==="status"){const S=t.status==="Active"?"bg-[#78AA86]":"bg-zinc-400";return e.jsx("p",{className:`${S} text-[13px] rounded text-white h-[18px] flex items-center justify-center`,children:t.status})}const n=t[s];return n?e.jsx("span",{children:n}):e.jsx("span",{className:"text-gray-500 italic",children:"-"})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx(R,{placeholder:"Search",searchValue:m,onSearchChange:x})}),e.jsx("div",{className:"flex gap-4",children:e.jsx(K,{})})]}),e.jsx("div",{className:"mt-3 overflow-y-scroll max-h-[25rem]",children:e.jsxs("table",{className:"min-w-full bg-white mb-5",children:[e.jsx("thead",{className:"text-[12px] text-center text-dropdownText",children:e.jsxs("tr",{style:{backgroundColor:"#F9F7F0"},children:[e.jsx("th",{className:"py-3 px-4 border-b border-tableBorder",children:"Sl.No"}),c.map(s=>s.visible&&e.jsx("th",{className:"py-2 px-4 font-medium border-b border-tableBorder",children:s.label},s.id)),e.jsx("th",{className:"py-2 px-4 font-medium border-b border-tableBorder relative",children:e.jsx(V,{columns:c,setColumns:C,tableId:"supplier"})})]})}),e.jsx("tbody",{className:"text-dropdownText text-center text-[13px]",children:f.skelton?[...Array(j.length||5)].map((s,t)=>e.jsx(Q,{columns:c},t)):j&&j.length>0?j.reverse().map((s,t)=>e.jsxs("tr",{className:"relative",children:[e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:t+1}),c.map(n=>n.visible&&e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:_(n.id,s)},n.id)),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder"})]},s._id)):e.jsx(X,{columns:c})})]})}),e.jsx(O,{open:l,onClose:()=>a(!1),onConfirm:F,message:"Are you sure you want to delete?"}),p&&d&&e.jsx(ee,{isModalOpen:p,closeModal:A,supplier:d})]})},he=()=>{const[i,m]=o.useState([]),{request:x}=P("get",5009),{supplierResponse:f}=o.useContext(U),[u,h]=o.useState(""),[c,C]=o.useState(null),{loading:p,setLoading:r}=o.useContext(Y),d=async()=>{try{const l=`${L.GET_ALL_SUPPLIER}`;r({...p,skelton:!0});const{response:a,error:b}=await x(l);if(console.log("API Response:",a),b||!a){r({...p,skelton:!1,noDataFound:!0});return}m(a.data),r({...p,skelton:!1})}catch(l){console.error("Error fetching suppliers:",l),r({...p,noDataFound:!0,skelton:!1})}};o.useEffect(()=>{d()},[f]);const y=i.filter(l=>l.status==="Active").length,w=i.filter(l=>l.status==="Inactive").length,g=l=>{const a=[],b=new Set,N=new Set;return l.forEach(v=>{b.has(v.supplierDisplayName)?N.has(v.supplierDisplayName)||(a.push(v),N.add(v.supplierDisplayName)):b.add(v.supplierDisplayName)}),a},D=g(i).length,A=l=>{C(l)},j=i.filter(l=>c==="Active"?l.status==="Active":c==="Inactive"?l.status==="Inactive":c==="Duplicate"?g(i).some(a=>a.supplierDisplayName===l.supplierDisplayName):!0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-6 flex items-center relative",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-2xl text-textColor",children:"Supplier"}),e.jsx("p",{className:"text-sm text-gray mt-1",children:"Organize supplier details to enhance purchasing and collaboration."})]}),e.jsxs("div",{className:"ml-auto gap-3 flex items-center",children:[e.jsx(G,{}),e.jsx("div",{})]})]}),e.jsx("div",{children:e.jsx(le,{all:i.length,active:y,inactive:w,duplicate:D,onCardClick:A})}),e.jsx("div",{className:"px-6 mt-3",children:e.jsx("div",{className:"bg-white p-5",children:e.jsx(re,{loading:p,supplierData:j,searchValue:u,setSearchValue:h,refreshSuppliers:d})})})]})};export{he as default};

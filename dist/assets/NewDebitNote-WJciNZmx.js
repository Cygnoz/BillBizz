import{r,u as k,j as e,ao as fe,ap as je,g as ae,T as Ne,P as ye,_ as O,e as S,X as ve,aq as Ce,a as Ae,L as we,x as Ie,w as L,af as Te,a9 as De,B as ie}from"./index-A_edQTkL.js";import{P as ke}from"./PrinterIcon-wSfdPfNy.js";import{a as Se}from"./avatar-3814049_1280-C-3wghWZ.js";const Ee=({purchaseOrderState:j,setPurchaseOrderState:c,isInterState:h,selectedBill:y})=>{var J;const[E,B]=r.useState(null),[ee,m]=r.useState(null),[q,V]=r.useState(""),[te,R]=r.useState([]),{request:se}=k("get",5003),Q=r.useRef(null),[p,d]=r.useState([{itemId:"",itemName:"",itemQuantity:"",itemCostPrice:"",itemTax:"",itemAmount:"",itemSgst:"",itemCgst:"",itemIgst:"",itemVat:"",itemSgstAmount:"",itemCgstAmount:"",itemIgstAmount:"",itemVatAmount:"",taxPreference:"",stock:"",purchaseAccountId:""}]),le=(t,l,n)=>{n.itemName||(B(o=>o===t?null:t),m(l))},z=t=>{Q.current&&!Q.current.contains(t.target)&&(B(null),m(null))},ne=()=>{const t={itemId:"",itemName:"",itemQuantity:"",itemCostPrice:"",itemTax:"",itemAmount:"",itemSgst:"",itemCgst:"",itemIgst:"",itemSgstAmount:"",itemCgstAmount:"",itemIgstAmount:"",itemVat:"",itemVatAmount:"",taxPreference:"",stock:"",purchaseAccountId:""},l=[...p,t];d(l)},b=(t,l)=>{B(null),m(null);const n=[...p];n[l].itemName=t.itemName,n[l].itemCostPrice=t.costPrice,n[l].itemQuantity=1,n[l].itemId=t.itemId,n[l].itemCgst=t.itemCgst,n[l].itemSgst=t.itemSgst,n[l].itemIgst=t.itemIgst,n[l].itemAmount=t.itemAmount,n[l].itemCostPrice=t.itemCostPrice,n[l].taxPreference=t.taxPreference,n[l].purchaseAccountId=t.purchaseAccountId,t.returnQuantity?n[l].stock=t.itemQuantity-t.returnQuantity:n[l].stock=t.itemQuantity;const o=Number(n[l].itemCostPrice),x=Number(n[l].itemQuantity)*o,{itemAmount:C,cgstAmount:I,sgstAmount:A,igstAmount:T}=$(x,n[l],h);n[l].itemAmount=h?(C+T).toFixed(2):(C+I+A).toFixed(2),n[l].itemCgstAmount=I,n[l].itemSgstAmount=A,n[l].itemIgstAmount=T,h?n[l].itemTax=T:n[l].itemTax=I+A,d(n),c==null||c(D=>({...D,items:n==null?void 0:n.map(P=>{const N={...P};return delete N.itemImage,N})}))},$=(t,l,n)=>{const o=l.itemCgst||0,g=l.itemSgst||0,x=l.itemIgst||0;let C=0,I=0,A=0;return n?A=t*x/100:(C=t*o/100,I=t*g/100),{itemAmount:t,cgstAmount:C,sgstAmount:I,igstAmount:A}},_=(t,l,n)=>{const o=[...p];o[t]={...o[t],[l]:n};const g=Number(o[t].itemQuantity),x=Number(o[t].itemCostPrice),C=Number(o[t].stock);if(g>C){o[t].itemQuantity=C.toString(),O.error("The entered quantity exceeds available stock.");return}const I=g*x,{itemAmount:A,cgstAmount:T,sgstAmount:D,igstAmount:P}=$(I,o[t],h);o[t].itemAmount=h?(A+P).toFixed(2):(A+T+D).toFixed(2),o[t].itemCgstAmount=T,o[t].itemSgstAmount=D,o[t].itemIgstAmount=P,h?(o[t].itemTax=P,o[t].itemCgstAmount="",o[t].itemSgstAmount=""):(o[t].itemTax=T+D,o[t].itemIgstAmount=""),d(o),c==null||c(N=>({...N,items:o==null?void 0:o.map(Y=>{const F={...Y};return delete F.itemImage,F})}))},U=async()=>{try{const t=`${S.GET_ALL_ITEM}`,l=await se(t),{response:n,error:o}=l;!o&&n?R(n.data):console.log(o)}catch(t){console.error("Error fetching items:",t)}},W=t=>{if(p.length>1){const l=p==null?void 0:p.filter((n,o)=>o!==t);d(l),c==null||c(n=>({...n,items:l}))}else{const l={itemId:"",itemName:"",itemQuantity:"",itemCostPrice:"",itemTax:"",itemAmount:"",itemSgst:"",itemCgst:"",itemIgst:"",itemVat:"",itemSgstAmount:"",itemCgstAmount:"",itemIgstAmount:"",itemVatAmount:"",itemPurchaseQuantity:"",taxPreference:"",stock:"",purchaseAccountId:""};d([l]),c==null||c(n=>({...n,items:[l]}))}},Z=()=>p.reduce((t,l)=>{const n=h?0:Number(l.itemSgstAmount)||0;return t+n},0),X=()=>p.reduce((t,l)=>{const n=h?0:Number(l.itemCgstAmount)||0;return t+n},0),oe=()=>p.reduce((t,l)=>{const n=h&&Number(l.itemIgstAmount)||0;return t+n},0),i=()=>p.reduce((t,l)=>{var o;const n=parseFloat(((o=l.itemQuantity)==null?void 0:o.toString())||"0");return t+n},0),v=()=>p.reduce((t,l)=>{const n=Number(l.itemQuantity)||0,o=Number(l.itemCostPrice)||0,g=n*o;return t+g},0);r.useEffect(()=>(E!==null?document.addEventListener("mousedown",z):document.removeEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}),[E]),r.useEffect(()=>{const t=i(),l=Z(),n=X(),o=oe(),g=v();c==null||c(x=>({...x,totalItem:t,sgst:h?"":l,cgst:h?"":n,igst:h?o:"",subTotal:g,totalTaxAmount:h?o:l+n,grandTotal:g+j.totalTaxAmount}))},[p,j.totalTaxAmount]),r.useEffect(()=>{const t=p==null?void 0:p.map(l=>{const n=(Number(l.itemCostPrice)||0)*(Number(l.itemQuantity)||0),o=$(n,l,h);return{...l,itemAmount:h?o.itemAmount+o.igstAmount:o.itemAmount+o.cgstAmount+o.sgstAmount,itemCgstAmount:o.cgstAmount>0?o.cgstAmount:"",itemSgstAmount:o.sgstAmount>0?o.sgstAmount:"",itemIgstAmount:o.igstAmount>0?o.igstAmount:""}});d(t),c==null||c(l=>({...l,items:t==null?void 0:t.map(n=>{const o={...n};return delete o.itemImage,o})}))},[h,j==null?void 0:j.destinationOfSupply,j==null?void 0:j.sourceOfSupply]),r.useEffect(()=>{if(y.length==0){const t={itemId:"",itemName:"",itemQuantity:"",itemCostPrice:"",itemTax:"",itemAmount:"",itemSgst:"",itemCgst:"",itemIgst:"",itemVat:"",itemSgstAmount:"",itemCgstAmount:"",itemIgstAmount:"",itemVatAmount:"",itemPurchaseQuantity:"",taxPreference:"",stock:"",purchaseAccountId:""};d([t]),c==null||c(l=>({...l,items:[t],grandTotal:0}))}},[y]);const H=()=>{var t;return(t=y==null?void 0:y.items)==null?void 0:t.filter(l=>{var n,o;return((o=(n=l.itemName)==null?void 0:n.toLowerCase())==null?void 0:o.includes(q.toLowerCase()))&&te.some(g=>g._id===l.itemId)})};return r.useEffect(()=>{j.items&&d(j.items)},[j.items]),r.useEffect(()=>{U()},[]),e.jsxs("div",{children:[e.jsx("div",{className:"rounded-lg border-2 border-tableBorder mt-5",children:e.jsxs("table",{className:"min-w-full bg-white rounded-lg relative pb-4 border-dropdownText",children:[e.jsx("thead",{className:"text-[12px] text-center text-dropdownText",children:e.jsx("tr",{className:"bg-lightPink",children:(J=fe)==null?void 0:J.map((t,l)=>e.jsx("th",{className:"py-2 px-4 font-medium border-b border-tableBorder relative",children:t},l))})}),e.jsx("tbody",{className:"text-dropdownText text-center text-[13px] ",children:p==null?void 0:p.map((t,l)=>{var n,o,g;return e.jsxs("tr",{children:[e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:l+1}),e.jsxs("td",{className:"border-y py-3 px-2 border-tableBorder",children:[e.jsx("button",{className:"relative w-full",onClick:()=>le(l,"searchProduct",t),children:t.itemName?e.jsxs("div",{className:"cursor-pointer gap-2 grid grid-cols-12 appearance-none items-center justify-center h-9 text-zinc-400 bg-white text-sm",children:[e.jsx("div",{className:"flex items-start col-span-4",children:e.jsx("img",{className:"rounded-full h-10 w-10 ",src:t.itemImage,alt:""})}),e.jsx("div",{className:"col-span-8  text-start",children:e.jsx("p",{className:"text-textColor",children:t.itemName})})]}):e.jsxs("div",{className:"cursor-pointer flex appearance-none items-center justify-center h-9 text-zinc-400 bg-white text-sm",children:[e.jsx("p",{children:"Type or click"}),e.jsx(je,{color:"currentColor",strokeWidth:2})]})}),E===l&&ee==="searchProduct"&&e.jsxs("div",{ref:Q,className:"absolute z-10 bg-white shadow rounded-md mt-1 p-2 w-[30%] space-y-1",children:[e.jsx(ae,{searchValue:q,onSearchChange:V,placeholder:"Select Item"}),((n=y==null?void 0:y.items)==null?void 0:n.length)>0?((o=H())==null?void 0:o.length)>0?(g=H())==null?void 0:g.map((x,C)=>e.jsxs("button",{className:"grid grid-cols-12 gap-1 p-2 hover:bg-gray-100 cursor-pointer border border-slate-400 rounded-lg w-full  bg-lightPink",onClick:()=>b(x,l),children:[e.jsx("div",{className:"col-span-2 flex justify-center",children:e.jsx("img",{className:"rounded-full h-10",src:x.itemImage,alt:""})}),e.jsx("div",{className:"col-span-10 flex",children:e.jsxs("div",{className:"text-start",children:[e.jsx("p",{className:"font-bold text-sm text-black",children:x.itemName}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Rate:"," ",x.costPrice?x.costPrice:"-"]})]})})]},C)):e.jsx("div",{className:"text-center border-slate-400 border rounded-lg",children:e.jsx("p",{className:"text-[red] text-sm py-4",children:"Items Not Found!"})}):e.jsx("div",{className:"text-center border-slate-400 border rounded-lg",children:e.jsx("p",{className:"text-[darkRed] text-sm py-4 px-4",children:"Please select a bill to view items!"})})]})]}),e.jsxs("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:[e.jsx("input",{type:"text",placeholder:"0",className:"w-[50px]  focus:outline-none text-center",value:t.itemQuantity||"",onChange:x=>_(l,"itemQuantity",x.target.value)})," ",e.jsx("br",{}),"Stock : ",t.stock?t.stock:"0"]}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:e.jsx("input",{type:"text",placeholder:"0",className:"w-[50px]  focus:outline-none text-center",value:t.itemCostPrice,onChange:x=>_(l,"itemCostPrice",x.target.value),disabled:!0})}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:e.jsx("input",{disabled:!0,type:"text",placeholder:"0",className:"w-[50px] focus:outline-none text-center",value:h?(t.itemIgstAmount||0)===0?"nil":t.itemIgstAmount:(t.itemCgstAmount||0)+(t.itemSgstAmount||0)===0?"nil":t.itemCgstAmount+t.itemSgstAmount})}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:e.jsx("input",{disabled:!0,type:"text",placeholder:"0",className:"w-[50px]  focus:outline-none text-center",value:t.itemAmount,onChange:x=>_(l,"itemAmount",x.target.value)})}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:e.jsx("div",{className:"text-center flex justify-center gap-2",onClick:()=>W(l),children:e.jsx(Ne,{color:"darkRed"})})})]},l)})})]})}),e.jsx("div",{className:"w-[60%] mt-0",children:e.jsxs("button",{type:"button",className:"bg-darkGreen text-darkRed rounded-lg py-2 px-6 flex items-center text-sm font-bold",onClick:ne,children:[e.jsx(ye,{color:"darkRed"}),"Add Item"]})})]})},Be={organizationId:"",supplierId:"",supplierDisplayName:"",sourceOfSupply:"",destinationOfSupply:"",taxMode:"",billId:"",supplierInvoiceNum:"",billDate:"",billType:"",debitNote:"",orderNumber:"",supplierDebitDate:"",paymentMode:"",depositAccountId:"",subject:"",items:[{itemId:"",itemName:"",itemQuantity:"",itemCostPrice:"",itemTax:"",itemAmount:"",itemSgst:"",itemCgst:"",itemIgst:"",itemSgstAmount:"",itemCgstAmount:"",stock:""}],addNotes:"",attachFiles:"",subTotal:"",totalItem:"",sgst:"",cgst:"",igst:"",totalTaxAmount:"",itemTotalDiscount:"",grandTotal:""},Re=({page:j})=>{var re,ce,de,me,ue;const[c,h]=r.useState(""),[y,E]=r.useState(null),[B,ee]=r.useState([]),[m,q]=r.useState([]),[V,te]=r.useState([]),[R,se]=r.useState([]),[Q,p]=r.useState([]),[d,le]=r.useState([]),[z,ne]=r.useState([]),[b,$]=r.useState([]),[_,U]=r.useState([]),[W,Z]=r.useState(!1),[X,oe]=r.useState([]),[i,v]=r.useState(Be),[H,J]=r.useState({supplierInvoiceNum:!1,debitDate:!1,supplierId:!1,sourceOfSupply:!1,destinationOfSupply:!1,paymentMode:!1,depositTo:!1,itemTable:!1}),{request:t}=k("get",5009),{request:l}=k("get",5004),{request:n}=k("get",5004),{request:o}=k("get",5005),{request:g}=k("get",5005),{request:x}=k("get",5001),{request:C}=k("get",5005),{request:I}=k("post",5005),{request:A}=k("put",5005),{id:T}=ve(),D=r.useRef(null);r.useContext(Ce);const P=Ae();console.log(i,"debitnote state");const N=s=>{const{name:a,value:u}=s.target;v({...i,[a]:u})},Y=s=>{E(s===y?null:s)},F=s=>{D.current&&!D.current.contains(s.target)&&E(null)},G=async(s,a,u)=>{try{const{response:f,error:w}=await u(s);!w&&f&&a(f.data)}catch(f){console.error("Error fetching data:",f)}},pe=(s,a,u)=>s==null?void 0:s.filter(f=>{var w;return(w=f[a])==null?void 0:w.toLowerCase().includes(u.toLowerCase())}),xe=async()=>{try{const s=`${S.GET_COUNTRY_DATA}`,{response:a,error:u}=await l(s);!u&&a&&p(a.data[0].countries)}catch(s){console.log("Error in fetching Country",s)}},he=()=>{if(d!=null&&d.organizationCountry){const s=Q.find(a=>a.name.toLowerCase()===d.organizationCountry.toLowerCase());if(d&&v(a=>({...a,destinationOfSupply:d.state})),s){const a=s.states;v(u=>({...u})),te(a)}else console.log("Country not found")}else console.log("No country selected")},ge=()=>{if(m.billingCountry){const s=Q.find(a=>a.name.toLowerCase()===m.billingCountry.toLowerCase());if(m&&v(a=>({...a,sourceOfSupply:m.billingState,supplierDisplayName:m.supplierDisplayName,supplierBillingCountry:m.billingCountry,supplierBillingState:m.billingState})),s){const a=s.states;se(a)}else console.log("Country not found")}else console.log("No country selected")},M=pe(B,"supplierDisplayName",c);console.log(H);const be=async()=>{const s={...H},a=[];if(i.supplierId.trim()===""?(s.supplierId=!0,a.push("Supplier")):s.supplierId=!1,i.destinationOfSupply.trim()===""?(s.destinationOfSupply=!0,a.push("Destination of Supply")):s.destinationOfSupply=!1,i.sourceOfSupply.trim()===""?(s.sourceOfSupply=!0,a.push("Source of Supply")):s.sourceOfSupply=!1,i.supplierDebitDate.trim()===""?(s.debitDate=!0,a.push("Debit Date")):s.debitDate=!1,i.paymentMode.trim()===""?(s.paymentMode=!0,a.push("Payment Mode")):s.paymentMode=!1,i.depositAccountId.trim()===""&&i.paymentMode==="Cash"?(s.depositTo=!0,a.push("Deposit To")):s.depositTo=!1,a.length>0){J(s),O.error(`Fill the required fields: ${a.join(", ")}`);return}try{let u,f;j==="edit"?(u=`${S.EDIT_DEBIT_NOTE}/${T}`,f=A):(console.log("working"),u=`${S.ADD_DEBIT_NOTE}`,f=I);const{response:w,error:K}=await f(u,i);!K&&w?(O.success(w.data.message),setTimeout(()=>{P("/purchase/debitnote")},1e3)):O.error(K==null?void 0:K.response.data.message)}catch(u){console.log(u)}};return r.useEffect(()=>{(i==null?void 0:i.destinationOfSupply)==""?Z(!1):(i==null?void 0:i.sourceOfSupply)!==(i==null?void 0:i.destinationOfSupply)?Z(!0):Z(!1)},[i==null?void 0:i.sourceOfSupply,i==null?void 0:i.destinationOfSupply]),r.useEffect(()=>{var s;if(i&&B){const{supplierId:a}=i;if(a){const u=B.find(f=>f._id===a);u&&q(u)}}if(i&&b){const{billId:a}=i;if(a){const u=(s=b==null?void 0:b.allBills)==null?void 0:s.find(f=>f._id===a);u&&U(u)}}},[i,B,b]),r.useEffect(()=>{const s=`${S.GET_ALL_SUPPLIER}`,a=`${S.GET_ONE_ORGANIZATION}`,u=`${S.GET_ALL_BILLS}`,f=`${S.Get_ALL_Acounts}`;if(G(a,le,n),G(s,ee,t),G(u,$,g),G(f,oe,x),j!=="edit"){const w=`${S.GET_DEBIT_NOTE_PREFIX}`;G(w,ne,o)}else{const w=`${S.GET_DEBIT_NOTE}/${T}`;G(w,v,C)}},[]),r.useEffect(()=>{j!=="edit"&&v(s=>({...s,debitNote:z}))},[z]),r.useEffect(()=>{i.paymentMode==="Credit"&&v(s=>({...s,depositAccountId:""}))},[i.paymentMode]),r.useEffect(()=>{he(),ge(),xe()},[d,m]),r.useEffect(()=>(y!==null?document.addEventListener("mousedown",F):document.removeEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}),[y]),e.jsxs("div",{className:"mx-5 my-4 text-sm",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsx(we,{to:"/purchase/debitNote",children:e.jsx("div",{className:"flex justify-center items-center h-11 w-11 bg-tertiary_main rounded-full",children:e.jsx(Ie,{})})}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("h4",{className:"font-bold text-xl text-textColor ",children:"Debit Note"})})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-4 py-5",children:[e.jsxs("div",{className:"bg-secondary_main p-5 min-h-max rounded-xl relative col-span-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-5 space-y-",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Supplier Name",e.jsx("span",{className:"text-[#bd2e2e] ",children:"*"})]}),e.jsxs("div",{className:"relative w-full",onClick:()=>Y("supplier"),children:[e.jsx("div",{className:"items-center flex appearance-none w-full h-9 text-zinc-400 bg-white border border-inputBorder text-sm pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:e.jsx("p",{children:m&&m.supplierDisplayName?m.supplierDisplayName:"Select Supplier"})}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(L,{color:"gray"})})]}),y==="supplier"&&e.jsxs("div",{ref:D,className:"absolute z-10 bg-white  shadow  rounded-md mt-1 p-2 w-[30%] space-y-1 max-h-72 overflow-y-auto  hide-scrollbar",children:[e.jsx(ae,{searchValue:c,onSearchChange:h,placeholder:"Select Supplier"}),(M==null?void 0:M.length)>0?M==null?void 0:M.map(s=>e.jsxs("div",{className:"grid grid-cols-12 gap-1 p-2 hover:bg-gray-100 cursor-pointe border border-slate-400 rounded-lg bg-lightPink cursor-pointer hover:bg-lightRose",children:[e.jsx("div",{className:"col-span-2 flex items-center justify-center",children:e.jsx("img",{className:"rounded-full ",src:s.supplierProfile?s.supplierProfile:Se,alt:""})}),e.jsx("div",{className:"col-span-10 flex cursor-pointer ",onClick:()=>{v(a=>({...a,supplierId:s._id,supplierDisplayName:s.supplierDisplayName,orderNumber:"",supplierInvoiceNum:"",billId:"",billDate:""})),E(null),q(s),U([])},children:e.jsxs("div",{className:` items-center space-y-1 ${s.mobile?"justify-start":"flex justify-center"}`,children:[e.jsx("p",{className:"font-bold text-sm",children:s.supplierDisplayName}),s.mobile&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Phone: ",s.mobile]})]})})]})):e.jsx("div",{className:"text-center border-slate-400 border rounded-lg",children:e.jsx("p",{className:"text-[darkRed] text-sm py-4",children:"Supplier Not Found!"})}),e.jsx("div",{className:"hover:bg-lightRose cursor-pointer border border-slate-400 rounded-lg py-4",children:e.jsx(Te,{page:"purchase"})})]})]}),e.jsx("div",{className:"relative w-full",children:e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Debit Note",e.jsx("input",{value:i.debitNote,name:"debitNote",id:"",onChange:N,disabled:!0,className:" block  appearance-none w-full h-9  mt-0.5 text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500 "})]})}),i.supplierId&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Source Of Supply",e.jsx("span",{className:"text-[#bd2e2e] ",children:"*"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsxs("select",{onChange:N,name:"sourceOfSupply",value:i.sourceOfSupply,className:"block appearance-none w-full h-9  text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Source Of Supply"}),i&&(V==null?void 0:V.map((s,a)=>e.jsx("option",{value:s,className:"text-gray",children:s},a)))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(L,{color:"gray"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Destination of Supply",e.jsx("span",{className:"text-[#bd2e2e] ",children:"*"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsxs("select",{onChange:N,name:"destinationOfSupply",value:i.destinationOfSupply,className:"block appearance-none w-full h-9  text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Destination Of Supply"}),R&&(R==null?void 0:R.map((s,a)=>e.jsx("option",{value:s,className:"text-gray",children:s},a)))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(L,{color:"gray"})})]})]})]}),e.jsxs("div",{className:" w-full",children:[e.jsxs("label",{htmlFor:"",className:"block text-sm mb-1 text-labelColor",onClick:()=>Y("bill"),children:["Bill#",e.jsx("span",{className:"text-[#bd2e2e] ",children:"*"})]}),e.jsxs("div",{className:"relative w-full ",onClick:()=>{Y("bill")},children:[e.jsx("div",{className:"items-center flex appearance-none w-full h-9 text-zinc-400 bg-white border border-inputBorder text-sm pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:e.jsx("p",{children:_&&_.supplierInvoiceNum?_.supplierInvoiceNum:"Select Bill"})}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(L,{color:"gray"})})]}),y==="bill"&&e.jsxs("div",{ref:D,className:"absolute z-10 bg-white  shadow  rounded-md mt-1 p-2 w-[30%] space-y-1 max-h-72 overflow-y-auto  hide-scrollbar",children:[e.jsx(ae,{searchValue:c,onSearchChange:h,placeholder:"Search Bill"}),m&&Object.keys(m).length>0?((re=b==null?void 0:b.allBills)==null?void 0:re.length)>0?((ce=b==null?void 0:b.allBills)==null?void 0:ce.filter(s=>s.supplierId===(m==null?void 0:m._id)).length)>0?(me=(de=b==null?void 0:b.allBills)==null?void 0:de.filter(s=>s.supplierId===(m==null?void 0:m._id)))==null?void 0:me.map(s=>e.jsx("div",{className:"gap-1 p-2 hover:bg-gray-100 cursor-pointer border border-slate-400 rounded-lg bg-lightPink",children:e.jsx("div",{className:"flex cursor-pointer",onClick:()=>{v(a=>({...a,billId:s._id,supplierInvoiceNum:s.supplierInvoiceNum,billDate:s.billDate,orderNumber:s.orderNumber})),E(null),U(s)},children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm",children:s.supplierInvoiceNum}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Supplier: ",s.supplierDisplayName]})]})})},s._id)):e.jsx("div",{className:"text-center border-slate-400 border rounded-lg",children:e.jsx("p",{className:"text-[red] text-sm py-4",children:"Bills Not Found!"})}):e.jsx("div",{className:"text-center border-slate-400 border rounded-lg",children:e.jsx("p",{className:"text-[red] text-sm py-4",children:"Bills Not Found!"})}):e.jsx("div",{className:"text-center border-slate-400 border rounded-lg",children:e.jsx("p",{className:"text-[darkRed] px-4 text-sm py-4",children:"Please select a supplier to view bills !"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Bill Type",e.jsx("span",{className:"text-[#bd2e2e] ",children:"*"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsxs("select",{name:"billType",value:i.billType,onChange:N,className:"block appearance-none w-full h-9  text-zinc-400 bg-white border border-inputBorder text-sm pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[e.jsx("option",{value:"",className:"text-gray",children:"Select Bill Type"}),e.jsx("option",{value:"Registered",children:"Registered"}),e.jsx("option",{value:"Deemed Export",children:"Deemed Export"}),e.jsx("option",{value:"SEZ With Payment",children:"SEZ With Payment"}),e.jsx("option",{value:"SEZ Without Payment",children:"SEZ Without Payment"}),e.jsx("option",{value:"Export With Payment",children:"Export With Payment"}),e.jsx("option",{value:"Export Without Payment",children:"Export Without Payment"}),e.jsx("option",{value:"B2C (Large)",children:"B2C (Large)"}),e.jsx("option",{value:"B2C Others",children:"B2C Others"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(L,{color:"gray"})})]})]}),e.jsx("div",{className:" w-full hidden",children:e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Order Number",e.jsx("input",{disabled:!0,name:"orderNumber",value:i.orderNumber,onChange:N,id:"",placeholder:"Value",className:" block  appearance-none w-full h-9  mt-0.5 text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500 "})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Supplier Debit Date",e.jsx("span",{className:"text-[#bd2e2e] ",children:"*"})]}),e.jsx("div",{className:"relative w-full",children:e.jsx("input",{type:"date",name:"supplierDebitDate",value:i.supplierDebitDate,onChange:N,id:"",placeholder:"Value",className:" block  appearance-none w-full h-9  mt-0.5 text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500 "})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Payment Mode",e.jsx("span",{className:"text-[#bd2e2e] ",children:"*"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsxs("select",{onChange:N,name:"paymentMode",value:i.paymentMode,className:"block appearance-none w-full h-9  text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Payment Mode"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Credit",children:"Credit"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(L,{color:"gray"})})]})]}),i.paymentMode==="Cash"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Deposit To",e.jsx("span",{className:"text-[#bd2e2e] ",children:"*"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsxs("select",{onChange:N,name:"depositAccountId",value:i.depositAccountId,className:"block appearance-none w-full h-9  text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Account"}),(ue=X==null?void 0:X.filter(s=>s.accountSubhead==="Bank"||s.accountSubhead=="Cash"))==null?void 0:ue.map(s=>e.jsx("option",{value:s._id,children:s.accountName},s._id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(L,{color:"gray"})})]})]}),e.jsx("div",{className:" w-full",children:e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Subject",e.jsx("input",{name:"subject",onChange:N,id:"",value:i.subject,placeholder:"Enter a subject within 250 Characters",className:"border-inputBorder w-full text-sm border rounded text-dropdownText  p-2 h-9 "})]})})]}),e.jsxs("div",{className:"mt-9",children:[e.jsx("p",{className:"font-bold text-base",children:"Add Item"}),e.jsx(Ee,{purchaseOrderState:i,setPurchaseOrderState:v,isInterState:W,oneOrganization:d,selectedBill:_})," "]}),e.jsx("br",{}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{htmlFor:"",className:"block text-sm mb-1 text-labelColor",children:["Add Note",e.jsx("input",{name:"addNotes",id:"",value:i.addNotes,onChange:N,placeholder:"Note",className:"border-inputBorder w-full text-sm border rounded  p-2 h-[57px] "})]})})]}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("div",{className:"mt-0",children:e.jsxs("label",{htmlFor:"",className:"block text-sm mb-1 text-labelColor",children:["Terms & Conditions",e.jsx("input",{name:"",id:"",placeholder:"Add Terms & Conditions of your business",className:"border-inputBorder w-full text-sm border rounded p-2 h-[57px] "})]})}),e.jsx("div",{className:"text-sm mt-3 hidden",children:e.jsxs("label",{className:"block  text-sm mb-1 text-labelColor",children:["Attach files to the Debit Notes",e.jsxs("div",{className:"border-inputBorder border-gray-800 w-full border-dashed border p-2 rounded flex flex-col gap-2 justify-center items-center bg-white mb-4 ",children:[e.jsxs("span",{className:"text-center inline-flex items-center gap-2",children:[e.jsx(De,{}),"Upload File"]}),e.jsx("div",{className:"text-center",children:"Maximum File Size: 1 MB"})]}),e.jsx("p",{className:"text-xs mt-1 text-gray-600"}),e.jsx("input",{type:"file",className:"hidden",value:"",name:"documents"})]})}),e.jsxs("div",{className:"bg-secondary_main p-5 min-h-max rounded-xl relative mt-2  ",children:[e.jsxs("div",{className:" pb-4  text-dropdownText border-b-2 border-slate-200 space-y-2",children:[e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:"Sub Total"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[d==null?void 0:d.baseCurrency," ",i.subTotal?i.subTotal:"0.00"," "]})]})]}),e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:" Total Quantity"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsx("p",{className:"text-end",children:i.totalItem?i.totalItem:"0"})]})]}),e.jsx("div",{children:W?e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:" IGST"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[d.baseCurrency," ",i.igst?i.igst:"0.00"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:" SGST"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[d.baseCurrency," ",i.sgst?i.sgst:"0.00"]})]})]}),e.jsxs("div",{className:"flex mt-2",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:" CGST"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[d.baseCurrency," ",i.cgst?i.cgst:"0.00"]})]})]})]})}),!W&&e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:" Total Tax"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[" ",d.baseCurrency," ",i.totalTaxAmount]})]})]})]}),e.jsxs("div",{className:"flex text-black",children:[e.jsxs("div",{className:"w-[75%] font-bold",children:[" ",e.jsx("p",{children:"Total"})]}),e.jsxs("div",{className:"w-full text-end font-bold text-base",children:[" ",e.jsxs("p",{className:"text-end",children:[" ",d.baseCurrency," ",i.grandTotal?i.grandTotal:"0.00"]})]})]}),e.jsxs("div",{className:"flex gap-4 m-5 justify-end",children:[" ",e.jsx(ie,{variant:"secondary",size:"sm",onClick:()=>P("/purchase/debitNote"),children:"Cancel"}),e.jsxs(ie,{variant:"secondary",size:"sm",children:[e.jsx(ke,{height:18,width:18,color:"currentColor"}),"Print"]}),e.jsx(ie,{variant:"primary",size:"sm",onClick:be,children:"Save & send"})," "]})]})]})]}),e.jsx("div",{})]})};export{Re as default};

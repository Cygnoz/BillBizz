import{a as C,c as D,u as S,d as A,r as f,j as t,B,e as R,_ as p,b as I}from"./index-A_edQTkL.js";import{b as L}from"./Group 2506-BZdUtVcx.js";function _({}){var g;const v=C(),y=D(),{request:b}=S("post",5004),{setIsAuthenticated:w}=A();f.useEffect(()=>{var a;(a=n[0].current)==null||a.focus()},[]);const N=((g=y.state)==null?void 0:g.email)||"",[l,m]=f.useState(["","","","","",""]),[O,x]=f.useState(!1),[h,d]=f.useState(null),n=Array.from({length:6},()=>f.useRef(null)),P=(a,e)=>{var r;const s=a.target.value;if(/^[0-9]$/.test(s)){const o=[...l];o[e]=s,m(o),e<n.length-1&&((r=n[e+1].current)==null||r.focus())}else if(s===""){const o=[...l];o[e]="",m(o)}},T=(a,e)=>{var s;if(a.key==="Backspace")if(l[e]==="")e>0&&((s=n[e-1].current)==null||s.focus());else{const r=[...l];r[e]="",m(r)}},E=a=>{var s;const e=a.clipboardData.getData("text").trim();if(/^\d{6}$/.test(e)){const r=e.split("");m(r),r.forEach((o,i)=>{n[i].current&&(n[i].current.value=o)}),(s=n[5].current)==null||s.focus()}a.preventDefault()},k=async a=>{var s,r,o,i,j;a.preventDefault(),x(!0),d(null);const e=l.join("");try{const c=await b(R.GET_OTP,{email:N,otp:e});if(console.log("OTP Verification Response:",c),(s=c.response)!=null&&s.data.success)p.success(((r=c.response)==null?void 0:r.data.message)||"OTP verified successfully!"),localStorage.setItem("authToken",c.response.data.token),w(!0),v("/landing");else{const u=((o=c.response)==null?void 0:o.data.message)||"OTP verification failed.";d(u),p.error(u)}}catch(c){if(I.isAxiosError(c)){const u=((j=(i=c.response)==null?void 0:i.data)==null?void 0:j.message)||"OTP verification failed. Please try again.";d(u),p.error(u)}else d("OTP verification failed. Please try again."),p.error("OTP verification failed. Please try again.")}finally{x(!1)}};return t.jsxs("div",{className:"h-[100vh] flex",children:[t.jsx("div",{className:"w-[50%] flex justify-center items-center bg-white",children:t.jsxs("div",{className:"w-[60%] ",children:[t.jsx("p",{className:"text-textColor font-bold text-4xl",children:"Get Started now"}),t.jsx("p",{className:"text-dropdownText mt-2 text-sm font-normal",children:"Enter your OTP to access your account"}),t.jsx("form",{className:"mt-8 space-y-6",onSubmit:k,children:t.jsxs("div",{className:"mt-4 space-y-2",children:[t.jsx("label",{htmlFor:"otp",className:"text-dropdownText text-sm block",children:"Enter OTP"}),t.jsx("div",{className:"flex justify-between w-full ",children:l.map((a,e)=>t.jsx("input",{type:"text",name:`otp${e}`,id:`otp${e}`,maxLength:1,value:a,onChange:s=>P(s,e),onKeyDown:s=>T(s,e),onPaste:e===0?E:void 0,ref:n[e],inputMode:"numeric",pattern:"[0-9]*",autoComplete:"one-time-code",className:"text-sm w-[60px] rounded-md text-center mt-1.5 bg-white border border-inputBorder h-[47px] focus:outline-none focus:bg-white focus:border-darkRed"},e))}),h&&t.jsx("p",{className:"text-red-500 text-sm",children:h}),t.jsx("div",{className:"flex justify-center",children:t.jsx(B,{type:"submit",className:"px-[45%] mt-7",children:O?"Verifying...":"Submit"})})]})})]})}),t.jsx("div",{className:"w-[50%] flex justify-center items-center bg-[#CACCBE]",children:t.jsxs("div",{className:"flex flex-col items-start justify-center w-[82%] h-full p-8",children:[t.jsxs("div",{className:"ms-[14%]",children:[t.jsxs("h2",{className:"text-textColor font-semibold text-3xl leading-tight mt-6",children:["Transform Your Financial ",t.jsx("br",{})," Management"]}),t.jsx("p",{className:"text-textColor mt-3 text-sm",children:"Unlock powerful tools to keep your finances on track"})]}),t.jsx("img",{src:L,alt:"Dashboard preview",className:"w-full"})]})})]})}export{_ as default};

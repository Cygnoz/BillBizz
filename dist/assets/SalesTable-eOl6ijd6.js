import{a as K,r as d,I as X,u as k,j as r,g as Y,a1 as Z,E as g,T as q,W as ee,e as a,_ as v}from"./index-A_edQTkL.js";import{D as se}from"./DotIcon-DTVVVqGb.js";import{P as re}from"./Print-Cv7N6AYi.js";import{T as te}from"./TableSkelton-L9YeclyQ.js";import{N as le}from"./NoDataFoundTable-hmwFq4Ia.js";import{P as ae}from"./PencilEdit-YyKjeo-p.js";const ie=s=>s?s==="invoice"?[{id:"createdDate",label:"Date",visible:!0},{id:"",label:"Due Date",visible:!1},{id:"salesInvoice",label:"Invoice#",visible:!0},{id:"reference",label:"Reference",visible:!0},{id:"paidStatus",label:"Status",visible:!0},{id:"customerDisplayName",label:"Customer Name",visible:!0},{id:"totalAmount",label:"Amount",visible:!0},{id:"",label:"Balance Due",visible:!1}]:s==="salesOrder"?[{id:"salesOrder",label:"Order Number",visible:!0},{id:"createdDate",label:"Order Date",visible:!0},{id:"customerDisplayName",label:"Customer Name",visible:!0},{id:"totalAmount",label:"Total",visible:!0},{id:"status",label:"Status",visible:!0}]:s==="quote"?[{id:"customerDisplayName",label:"Customer Name",visible:!0},{id:"createdDate",label:"Date",visible:!0},{id:"reference",label:"Reference",visible:!0},{id:"salesQuotes",label:"Quote Number",visible:!0},{id:"status",label:"Status",visible:!0},{id:"totalAmount",label:"Amount",visible:!0}]:s==="salesReturn"?[{id:"createdDate",label:"Date",visible:!0},{id:"customerRMA",label:"RMA#",visible:!0},{id:"salesOrder",label:"SalesOrder",visible:!0},{id:"status",label:"Status",visible:!0},{id:"customerName",label:"Customer Name",visible:!0},{id:"totalAmount",label:"Amount",visible:!0},{id:"returned",label:"Returned",visible:!0}]:s==="reciept"?[{id:"paymentDate",label:"Date",visible:!0},{id:"receipt",label:"Reciept",visible:!0},{id:"customerDisplayName",label:"Customer Name",visible:!0},{id:"paymentMode",label:"Mode",visible:!0},{id:"amountReceived",label:"Amount Received",visible:!0}]:s==="credit-Note"?[{id:"creditNote",label:"Credit Note",visible:!0},{id:"customerDisplayName",label:"Customer Name",visible:!0},{id:"customerCreditDate",label:"Date",visible:!0},{id:"orderNumber",label:"orderNumber",visible:!0},{id:"totalAmount",label:"Balance",visible:!0}]:[]:[],me=({page:s})=>{const o=K(),{loading:u,setLoading:b}=d.useContext(X),{request:B}=k("get",5007),{request:Q}=k("delete",5007),[m,F]=d.useState(""),[f,N]=d.useState([]),[M,x]=d.useState(!1),[c,h]=d.useState(null),P=e=>{h(e),x(!0)},C=async()=>{try{const e=s==="invoice"?`${a.GET_ALL_SALES_INVOICE}`:s==="salesOrder"?`${a.GET_ALL_SALES_ORDER}`:s==="quote"?`${a.GET_ALL_QUOTES}`:s==="reciept"?`${a.GET_ALL_SALES_RECIEPT}`:s==="credit-Note"?`${a.GET_ALL_CREDIT_NOTE}`:"";b({...u,skelton:!0});const{response:t,error:l}=await B(e);if(l||!t){b({...u,skelton:!1,noDataFound:!0});return}console.log(t.data),N(t.data),b({...u,skelton:!1})}catch(e){console.error("Error fetching quotes:",e),b({...u,noDataFound:!0,skelton:!1})}};d.useEffect(()=>{C()},[]);const G=ie(s),[n,V]=d.useState(G),U=e=>e==null?void 0:e.split("T")[0],z=(e,t)=>{if(e==="createdDate")return U(t.createdDate);if(e==="paidStatus")return r.jsx("div",{className:"flex justify-center items-center",children:r.jsxs("div",{className:`${t.paidStatus==="Pending"?"bg-zinc-200":t.paidStatus==="Completed"?"bg-[#94dca9]":"bg-[#dcd894]"} text-[13px] rounded-lg text-center items-center text-textColor h-[18px] px-2 max-w-fit gap-2 py-2 flex justify-center`,children:[r.jsx(se,{color:"#495160"}),t.paidStatus]})});const l=t[e];return l?r.jsx("span",{children:l}):r.jsx("span",{className:"text-gray-500 italic",children:"-"})},i=Array.isArray(f)?f.filter(e=>{var l,E,p,S,y,D,j,L,A,_,w,O,T,$,R,I;const t=m==null?void 0:m.toLowerCase();return s==="credit-Note"?((E=(l=e==null?void 0:e.customerDisplayName)==null?void 0:l.toLowerCase())==null?void 0:E.includes(t))||((S=(p=e==null?void 0:e.creditNote)==null?void 0:p.toLowerCase())==null?void 0:S.includes(t))||((D=(y=e==null?void 0:e.orderNumber)==null?void 0:y.toLowerCase())==null?void 0:D.includes(t)):((L=(j=e==null?void 0:e.customerDisplayName)==null?void 0:j.toLowerCase())==null?void 0:L.includes(t))||((_=(A=e==null?void 0:e.reference)==null?void 0:A.toLowerCase())==null?void 0:_.includes(t))||((O=(w=e==null?void 0:e.salesQuotes)==null?void 0:w.toLowerCase())==null?void 0:O.includes(t))||(($=(T=e==null?void 0:e.salesInvoice)==null?void 0:T.toLowerCase())==null?void 0:$.includes(t))||((I=(R=e==null?void 0:e.salesOrder)==null?void 0:R.toLowerCase())==null?void 0:I.includes(t))}):[],W=e=>{const t={page:s};s==="reciept"?o(`/sales/receipt/view/${e}`,{state:t}):o(`/sales/viewsalesorder/${e}`,{state:t})},H=e=>{s==="salesOrder"?o(`/sales/salesorder/edit/${e}`):s==="quote"?o(`/sales/quote/edit/${e}`):s==="invoice"?o(`/sales/invoice/edit/${e}`):s==="reciept"?o(`/sales/receipt/edit/${e}`):s==="credit-Note"?o(`/sales/credit-note/edit/${e}`):console.warn(`Unexpected page value: ${s}`)},J=async()=>{if(c)try{const e=s==="salesOrder"?`${a.DELETE_SALES_ORDER}/${c}`:s==="quote"?`${a.DELETE_SALES_QUOTE}/${c}`:s==="invoice"?`${a.DELETE_SALES_INVOICE}/${c}`:s==="reciept"?`${a.DELETE_SALES_RECIEPT}/${c}`:s==="credit-Note"?`${a.DELETE_CREDIT_NOTE}/${c}`:"",{response:t,error:l}=await Q(e);!l&&t?(v.success(t.data.message),C()):v.error(l.response.data.message)}catch{v.error("Error occurred while deleting.")}finally{x(!1),h(null)}};return r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"flex mb-4 items-center gap-5",children:[r.jsx("div",{className:"w-[95%]",children:r.jsx(Y,{onSearchChange:F,searchValue:m,placeholder:s==="invoice"?"Search Invoice":s==="salesOrder"?"Search Sales Order":s==="salesReturn"?"Search Sales Return":s==="reciept"?"Search Receipts":s==="credit-Note"?"Search Credit Note":"Search Quote"})}),r.jsx(re,{})]}),r.jsx("div",{className:"mt-3 max-h-[25rem] overflow-y-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:r.jsxs("table",{className:"min-w-full bg-white mb-5",children:[r.jsx("thead",{className:"text-[12px] text-center text-dropdownText",children:r.jsxs("tr",{style:{backgroundColor:"#F9F7F0"},className:"sticky top-0 z-10",children:[r.jsx("th",{className:"py-2.5 px-4 font-medium border-b border-tableBorder",children:"Sl.No"}),n.map(e=>e.visible&&r.jsx("th",{className:"py-2 px-4 font-medium border-b border-tableBorder",children:e.label},e.id)),r.jsx("th",{className:"py-3 px-4 font-medium border-b border-tableBorder",children:"Actions "}),r.jsx("th",{className:"py-3 px-4 font-medium border-b border-tableBorder",children:r.jsx(Z,{columns:n,setColumns:V,tableId:`${s}`})})]})}),r.jsx("tbody",{className:"text-dropdownText text-center text-[13px]",children:u.skelton?[...Array(i!=null&&i.length?i==null?void 0:i.length:5)].map((e,t)=>r.jsx(te,{columns:s=="salesOrder"||s=="quote"?[...n,"ff","tt"]:n},t)):i&&i.length>0?i.slice().reverse().map((e,t)=>r.jsxs("tr",{className:"relative",children:[r.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:t+1}),n.map(l=>l.visible&&r.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:z(l.id,e)},l.id)),r.jsxs("td",{className:"py-3 px-4 border-b gap-3 border-tableBorder flex justify-center items-center",children:[r.jsx("div",{onClick:()=>H(e._id),children:r.jsx(ae,{color:"#0B9C56",className:"cursor-pointer"})}),r.jsx("div",{onClick:()=>W(e._id),children:r.jsx(g,{color:"#569FBC",className:"cursor-pointer"})}),r.jsx("div",{onClick:()=>P(e._id),children:r.jsx(q,{color:"red"})})]}),r.jsx("td",{className:"py-3 px-4 border-b border-tableBorder"})]},e._id)):r.jsx(le,{columns:s=="salesOrder"||s=="reciept"||s=="quote"||s=="credit-Note"?[...n,"ff","tt"]:n})})]})}),r.jsx(ee,{open:M,onClose:()=>x(!1),onConfirm:J,message:"Are you sure you want to delete?"})]})};export{me as S};

import{r as p,u as F,ah as H,j as e,g as K,a1 as Q,y as U,E as W,J as X,_ as b}from"./index-A_edQTkL.js";import{T as Y}from"./TableSkelton-L9YeclyQ.js";import{N as Z}from"./NoDataFoundTable-hmwFq4Ia.js";import{P as D}from"./PrintButton-wNIz7Qro.js";import{P as V}from"./Pagination-CosxQtyN.js";const ne=({page:c,columns:n,data:u,onRowClick:j,renderColumnContent:g,searchPlaceholder:T,loading:_,searchableFields:A,setColumns:E,onEditClick:y,deleteUrl:k})=>{const[C,R]=p.useState(""),[i,N]=p.useState(1),{request:O}=F("delete",5005),{request:$}=F("delete",5e3),{setPurchaseResponse:q}=p.useContext(H),d=10,l=Array.isArray(u)?u.slice().reverse().filter(s=>A.map(r=>{var t;return(t=s[r])==null?void 0:t.toString().trim().toLowerCase()}).some(r=>r==null?void 0:r.includes(C.toLowerCase().trim()))):[],z=Math.ceil((l==null?void 0:l.length)/d),h=l==null?void 0:l.slice((i-1)*d,i*d),L=s=>{N(s)},P=[...n.filter(s=>s.visible),{},{},{}],I=async s=>{var r,t,f,B,w,v;try{const m=`${k}/${s}`,J=c==="OCR"?$:O,{response:a,error:o}=await J(m);!o&&a?(console.log(a),c==="OCR"?b.success((r=a==null?void 0:a.data[0])==null?void 0:r.message):b.success((t=a==null?void 0:a.data)==null?void 0:t.message),q(x=>{var S;const M=(S=x==null?void 0:x.data)==null?void 0:S.filter(G=>G._id!==s);return{...x,data:M}})):(console.log(o.response),c==="OCR"?b.error((B=(f=o==null?void 0:o.response)==null?void 0:f.data)==null?void 0:B.message):b.error((v=(w=o==null?void 0:o.response)==null?void 0:w.data)==null?void 0:v.message))}catch(m){console.error("Error in deleting item:",m)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(K,{placeholder:T,searchValue:C,onSearchChange:s=>{R(s),N(1)}}),e.jsx(D,{})]}),e.jsx("div",{className:"overflow-x-auto mt-3 hide-scrollbar overflow-y-scroll max-h-[25rem]",children:e.jsxs("table",{className:"min-w-full bg-white mb-5",children:[e.jsx("thead",{className:"text-[12px] text-center text-dropdownText",children:e.jsxs("tr",{style:{backgroundColor:"#F9F7F0"},children:[e.jsx("th",{className:"py-3 px-4 border-b border-tableBorder",children:"Sl.No."}),n==null?void 0:n.map(s=>s.visible&&e.jsx("th",{className:"py-2 px-4 font-medium border-b border-tableBorder",children:s.label},s.id)),e.jsx("th",{className:"py-3 px-2 font-medium border-b border-tableBorder",children:"Action"}),e.jsx("th",{className:"py-3 px-2 font-medium border-b border-tableBorder",children:e.jsx(Q,{columns:n,setColumns:E,tableId:`${c}`})})]})}),e.jsx("tbody",{className:"text-dropdownText text-center text-[13px]",children:_?[...Array(d)].map((s,r)=>e.jsx(Y,{columns:P},r)):h&&h.length>0?h.map((s,r)=>e.jsxs("tr",{className:"relative cursor-pointer",children:[e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:(i-1)*d+r+1}),n.map(t=>t.visible&&e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder text-center",children:g?g(t.id,s)||"-":s[t.id]!==void 0&&s[t.id]!==null?s[t.id]:"-"},t.id)),e.jsxs("td",{className:"py-3 px-4 border-b border-tableBorder flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>y&&y(s._id),children:e.jsx(U,{color:"green",size:18})}),e.jsx("button",{onClick:()=>j&&j(s._id),children:e.jsx(W,{color:"#569FBC"})}),e.jsx("button",{onClick:()=>I(s._id),children:e.jsx(X,{color:"#EA1E4F",size:18})})]}),e.jsx("td",{className:"py-3 px-4 border-b border-tableBorder"})]},s.id)):e.jsx(Z,{columns:P})})]})}),e.jsx(V,{currentPage:i,totalPages:z,onPageChange:L})]})};export{ne as P};

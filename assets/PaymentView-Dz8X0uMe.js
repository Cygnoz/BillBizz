import{u as N,r as i,j as e,e as u,a as v,Z as P,X as w,L as E,x as S,B as g}from"./index-A_edQTkL.js";import{P as A}from"./PencilEdit-YyKjeo-p.js";import{T as C,P as D}from"./PaymentViewTypes-BD9VPuvB.js";import{P as F}from"./PrinterIcon-wSfdPfNy.js";import{J as I}from"./Jornal-UAE1ndKr.js";function B({data:s,organization:x}){var b;const{request:d}=N("get",5009),{request:p}=N("get",5004),[t,m]=i.useState([]),[o,n]=i.useState([]),l=new C.ToWords({localeCode:"en-IN",converterOptions:{ignoreDecimal:!0,ignoreZeroCurrency:!0}}),j=async()=>{try{const r=`${u.GET_ONE_SUPPLIER}/${s.supplierId}`,{response:a,error:h}=await d(r);!h&&a?m(a.data):console.log("Error in fetching Supplier ,",h)}catch(r){console.log("Error in fetching Supplier ,",r)}},f=async()=>{try{const r=`${u.GET_CURRENCIES}`,{response:a,error:h}=await p(r);!h&&a?n(a.data):console.log("Error in fetching Supplier ,",h)}catch(r){console.log("Error in fetching Supplier ,",r)}},c=o.find(r=>r.baseCurrency===!0),y=c?`${c==null?void 0:c.currencyName} ${s!=null&&s.amountPaid&&!isNaN(Number(s==null?void 0:s.amountPaid))?l==null?void 0:l.convert(Number(s==null?void 0:s.amountPaid)):"Zero"} Only`:"Currency not found";return i.useEffect(()=>{j(),f()},[s]),e.jsx("div",{className:" flex justify-center",children:e.jsxs("div",{className:"bg-white drop-shadow-2xl w-[595px] p-8 pl-[24px] pr-[24px]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 mt-1",children:[e.jsx("div",{children:e.jsx("img",{src:x==null?void 0:x.organizationLogo,alt:"Company Logo",className:"h-[49px] w-[71px]"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-xl font-bold text-textColor",children:"Supplier Payment"}),e.jsx("p",{className:"text-sm font-bold text-dropdownText mt-[5px]",children:s==null?void 0:s.paymentId}),e.jsx("h3",{className:"font-normal text-xs mt-[14px] text-pdftext",children:s==null?void 0:s.supplierDisplayName}),e.jsxs("p",{className:"font-normal text-xs text-pdftext",children:[t.supplierEmail&&t.Supplier," ",(t==null?void 0:t.mobile)&&`| +${t.mobile}`]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[e.jsxs("div",{className:"grid grid-cols-2 items-center space-y-3",children:[e.jsx("p",{className:"font-normal text-xs text-pdftext",children:"Payment ID"}),e.jsx("p",{className:"text-xs  text-pdftext text-end",children:s==null?void 0:s.paymentId}),e.jsx("p",{className:"font-normal text-xs text-pdftext",children:"Payment Date"}),e.jsx("p",{className:"text-xs  text-pdftext text-end",children:s!=null&&s.paymentdate?s==null?void 0:s.paymentDate:"-"}),e.jsx("p",{className:"font-normal text-xs text-pdftext",children:"Reference Number"}),e.jsx("p",{className:"text-xs  text-pdftext text-end",children:s!=null&&s.reference?s.reference:"-"}),e.jsx("p",{className:"font-normal text-xs text-pdftext",children:"Paid To"}),e.jsx("p",{className:"text-xs  text-pdftext text-end",children:s.supplierDisplayName}),e.jsx("p",{className:"font-normal text-xs text-pdftext",children:"Payment Mode"}),e.jsx("p",{className:"text-xs  text-pdftext text-end",children:s!=null&&s.paymentMode?s.paymentMode:"-"})]}),e.jsx("div",{className:"flex items-center justify-center ",children:e.jsxs("div",{className:"bg-gradient-to-r from-[#E3E6D5] to-[#F7E7CE] w-full flex justify-center items-center flex-col py-5 rounded-sm",children:[e.jsx("h3",{className:"text-[14px] font-bold ",children:"Amount Paid"}),e.jsx("p",{className:"text-xs  text-pdftext text-end",children:s!=null&&s.amountPaid?s.amountPaid:"-"})]})})]}),e.jsxs("div",{className:"flex gap-4 pb-5",children:[" ",e.jsx("p",{className:"font-normal text-xs text-pdftext",children:"Amount Paid in Words"}),e.jsx("p",{className:"text-xs  text-pdftext text-end",children:y||"-"})]}),e.jsxs("table",{className:"w-full mb-8 border border-dropdownBorder",children:[e.jsx("thead",{className:"border-b border-dropdownBorder bg-gray-100",children:e.jsxs("tr",{className:"font-bold text-[10px] text-pdftext text-center",children:[e.jsx("th",{className:"py-2 px-4",children:"Bill number"}),e.jsx("th",{className:"py-2 px-4",children:"Bill Date"}),e.jsx("th",{className:"py-2 px-4",children:"Bill Amount"}),e.jsx("th",{className:"py-2 px-4",children:"Payment Amount"})]})}),(b=s==null?void 0:s.unpaidBills)==null?void 0:b.map(r=>e.jsx("tbody",{children:e.jsxs("tr",{className:"text-[10px] text-center",children:[e.jsx("td",{className:"py-2 px-4",children:r==null?void 0:r.billNumber}),e.jsx("td",{className:"py-2 px-4",children:r==null?void 0:r.billDate}),e.jsx("td",{className:"py-2 px-4",children:r==null?void 0:r.billAmount}),e.jsx("td",{className:"py-2 px-4",children:r==null?void 0:r.payment})]})}))]}),e.jsxs("div",{className:"mb-8 text-xs space-y-2",children:[e.jsx("h3",{className:"font-normal text-xs text-pdftext",children:"Bill to"}),e.jsx("p",{className:"text-pdftext text-sm font-bold ",children:t.supplierDisplayName}),e.jsxs("p",{className:"font-normal text-xs text-pdftext ",children:[(t==null?void 0:t.supplierEmail)&&t.Supplier,t.supplierEmail&&t.mobile&&"|"," ",(t==null?void 0:t.mobile)&&`+${t.mobile}`]}),e.jsxs("p",{className:"font-normal text-xs text-pdftext ",children:[t==null?void 0:t.billingAddressStreet1,(t==null?void 0:t.billingAddressStreet1)&&(t==null?void 0:t.billingAddressStreet2)&&",",t==null?void 0:t.billingAddressStreet2]})," ",e.jsxs("p",{children:[t==null?void 0:t.supplierCity," ",t==null?void 0:t.billingPinCode]})," ",e.jsxs("p",{children:[t.billingState,",",t.billingCountry," "]})]}),e.jsxs("div",{className:"w-full mt-[64px] gap-2 mb-[55.5px] flex  items-center",children:[e.jsx("p",{className:"text-pdftext text-xs font-normal",children:"Signature"}),e.jsx("div",{className:"border-t border-[0.5px] border-loremcolor w-[40%]"})]})]})})}function $({data:s}){var o;const[x,d]=i.useState(0),p=v(),t=n=>{d(n)},m=n=>{p(`/purchase/bills/view/${n}`)};return e.jsxs("div",{className:"bg-[#F6F6F6] rounded-md px-3 py-6 space-y-4",children:[e.jsx("div",{children:e.jsx(D,{})}),(o=s==null?void 0:s.unpaidBills)==null?void 0:o.map((n,l)=>e.jsxs("div",{onClick:()=>{t(l),m(n.billId)},className:`text-[#303F58] p-4 rounded-md mb-4 space-y-2 ${x===l?"bg-white":""} cursor-pointer`,children:[e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("p",{children:s==null?void 0:s.supplierDisplayName}),e.jsxs("div",{className:"flex justify-end",children:[" ",e.jsx("p",{className:"ms-auto",children:n==null?void 0:n.billAmount})]})]}),e.jsxs("p",{children:[n==null?void 0:n.billDate," | ",n==null?void 0:n.billNumber]}),e.jsxs("p",{className:"font-bold",children:["Mode: ",s==null?void 0:s.paymentMode]})]},l))]})}function O({}){const[s,x]=i.useState([]),{request:d}=N("get",5005),{organization:p}=P(),{id:t}=w(),m=async()=>{var o,n;try{const l=`${u.GET_PAYMENT}/${t}`,j=await d(l),{response:f,error:c}=j;!c&&f?x(f.data):console.error("API Error:",((n=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:n.message)||"Unknown error")}catch(l){console.error("Failed to fetch settings:",l)}};return i.useEffect(()=>{m()},[]),e.jsxs("div",{className:"p-6 text-pdftext bg-white rounded-lg mx-7",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(E,{to:"/purchase/payment-made",children:e.jsx("div",{style:{borderRadius:"50%"},className:"w-[40px] h-[40px] flex items-center justify-center bg-[#F6F6F6]",children:e.jsx(S,{})})}),e.jsx("h1",{className:"text-[20px] font-bold text-[#303F58]",children:"View Payment"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-x-3 items-center flex text-[#303F58] font-bold text-[16px]",children:[e.jsx("h3",{children:"Payment"}),e.jsx("h3",{className:"font-normal",children:"|"}),e.jsx("h3",{children:s==null?void 0:s.paymentId}),e.jsx("p",{className:"w-[47px] h-[25px] bg-[#F3F3F3] rounded-lg flex items-center justify-center",children:"Draft"})]}),e.jsxs("div",{className:"flex space-x-3 mb-4",children:[e.jsxs(g,{className:"h-[38px] w-[100px] flex justify-center items-center",variant:"secondary",children:[e.jsx(A,{color:"black"}),"Edit"]}),e.jsxs(g,{variant:"secondary",size:"sm",className:"px-2",children:[e.jsx(F,{color:"#565148",height:16,width:16}),"Print"]})]})]}),e.jsx("hr",{className:"mb-5 border-loremcolor"}),e.jsxs("div",{className:"grid grid-cols-3 space-x-4",children:[e.jsx($,{data:s}),e.jsx("div",{className:"col-span-2",children:e.jsx(B,{data:s,organization:p})})]}),e.jsx(I,{page:"DebitNote"})]})}export{O as default};

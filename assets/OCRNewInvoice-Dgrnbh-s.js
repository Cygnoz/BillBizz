import{j as e,r,ax as I,u as M,B as c,P as F,M as V,_ as n,e as L}from"./index-A_edQTkL.js";import{b as B}from"./6-dMV7aCto.js";const O=()=>e.jsx("div",{children:e.jsxs("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{"clip-path":"url(#clip0_11620_74989)",children:[e.jsx("path",{d:"M33.4393 3.12109H14.1719V11.1111H37.5543V7.23451C37.5543 4.96616 35.7083 3.12109 33.4393 3.12109Z",fill:"#ECD9D9"}),e.jsx("path",{d:"M22.5352 12.3403H0V4.92636C0 2.20972 2.21068 0 4.92828 0H12.1336C12.8497 0 13.5396 0.150925 14.1664 0.434509C15.0418 0.828964 15.7939 1.47913 16.3213 2.3286L22.5352 12.3403Z",fill:"#820000"}),e.jsx("path",{d:"M42 14.0004V37.8817C42 40.153 40.1511 42.0003 37.8789 42.0003H4.12111C1.84891 42.0003 0 40.153 0 37.8817V9.88086H37.8789C40.1511 9.88086 42 11.7288 42 14.0004Z",fill:"#820000"}),e.jsx("path",{d:"M42 14.0004V37.8817C42 40.153 40.1511 42.0003 37.8789 42.0003H21V9.88086H37.8789C40.1511 9.88086 42 11.7288 42 14.0004Z",fill:"#680000"}),e.jsx("path",{d:"M32.049 25.9395C32.049 32.032 27.0928 36.9884 21.0011 36.9884C14.9093 36.9884 9.95312 32.032 9.95312 25.9395C9.95312 19.8481 14.9093 14.8916 21.0011 14.8916C27.0928 14.8916 32.049 19.8481 32.049 25.9395Z",fill:"#E7ECFC"}),e.jsx("path",{d:"M32.0479 25.9395C32.0479 32.032 27.0918 36.9884 21 36.9884V14.8916C27.0918 14.8916 32.0479 19.8481 32.0479 25.9395Z",fill:"#ECD9D9"}),e.jsx("path",{d:"M24.5593 26.0758C24.3289 26.2709 24.0466 26.3661 23.7668 26.3661C23.4166 26.3661 23.0686 26.2177 22.8251 25.9287L22.2287 25.2218V29.8499C22.2287 30.5292 21.6776 31.0803 20.9983 31.0803C20.3189 31.0803 19.7678 30.5292 19.7678 29.8499V25.2218L19.1715 25.9287C18.7325 26.4481 17.9567 26.5145 17.4373 26.0758C16.9182 25.6378 16.8515 24.8617 17.2896 24.3422L19.7252 21.4548C20.0427 21.0793 20.5061 20.8633 20.9983 20.8633C21.4905 20.8633 21.9538 21.0793 22.2714 21.4548L24.707 24.3422C25.145 24.8617 25.0784 25.6378 24.5593 26.0758Z",fill:"#D8B0B0"}),e.jsx("path",{d:"M24.561 26.0758C24.3306 26.2709 24.0483 26.3661 23.7686 26.3661C23.4183 26.3661 23.0703 26.2177 22.8268 25.9287L22.2305 25.2218V29.8499C22.2305 30.5292 21.6793 31.0803 21 31.0803V20.8633C21.4922 20.8633 21.9555 21.0793 22.2731 21.4548L24.7087 24.3422C25.1467 24.8617 25.0801 25.6378 24.561 26.0758Z",fill:"#820000"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_11620_74989",children:e.jsx("rect",{width:"42",height:"42",fill:"white"})})})]})}),k=()=>{const[h,p]=r.useState(!1),[x,o]=r.useState(null),[j,f]=r.useState(!1),[u,d]=r.useState(null),{setOcrInvoice:C}=r.useContext(I),{request:g}=M("post",5e3),v=["image/png","image/jpeg","application/pdf"],b=()=>p(!0),i=()=>{p(!1),o(null),d(null)},m=s=>v.includes(s.type)?!0:(n.error("Invalid file type. Only PNG, JPG, and PDF are allowed."),!1),y=s=>{if(s.target.files&&s.target.files[0]){const l=s.target.files[0];if(!m(l))return;d(l.name);const t=new FileReader;t.onloadend=()=>{const a=t.result;o(a)},t.readAsDataURL(l)}},N=s=>{if(s.preventDefault(),s.dataTransfer.files&&s.dataTransfer.files[0]){const l=s.dataTransfer.files[0];if(!m(l))return;d(l.name);const t=new FileReader;t.onloadend=()=>{const a=t.result;o(a)},t.readAsDataURL(l)}},D=()=>{i()},w=async()=>{if(!x){n.error("No file selected.");return}try{f(!0);const s=`${L.UPLOAD_INVOICE}`,l={file:x},{response:t,error:a}=await g(s,l);t&&!a?(n.success(t.data.message),i(),C(E=>({...E,payload:l}))):(n.error(a.response.data.error),console.log(a.response.data.error))}catch(s){console.error("Error occurred during upload:",s)}finally{f(!1)}};return e.jsxs("div",{children:[e.jsxs(c,{variant:"primary",size:"sm",onClick:b,children:[e.jsx(F,{color:"white"}),e.jsx("p",{className:"text-sm",children:"Add Invoice"})]}),e.jsx(V,{open:h,onClose:i,className:"w-[45%]","aria-labelledby":"upload-invoice-title",children:e.jsxs("div",{className:"p-5 mt-3",children:[e.jsxs("div",{className:"mb-5 flex py-3 px-5 rounded-xl bg-CreamBg relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 -right-8 w-[30%] h-[80px] object-fit",style:{backgroundImage:`url(${B})`,backgroundRepeat:"no-repeat"}}),e.jsx("div",{className:"relative z-10",children:e.jsx("h3",{id:"upload-invoice-title",className:"text-xl mt-1 font-bold text-textColor",children:"Upload Invoice"})}),e.jsx("div",{className:"ms-auto text-3xl cursor-pointer relative z-10",onClick:i,"aria-label":"Close Modal",role:"button",children:"Ã—"})]}),j&&e.jsx("div",{className:"absolute inset-0 flex justify-center items-center bg-opacity-50 bg-gray-700 bg-slate-50",children:e.jsx("div",{className:"loader"})}),e.jsx("form",{children:e.jsx("div",{className:"border border-dashed border-[#1849D6] py-7 flex items-center justify-center",onDragOver:s=>s.preventDefault(),onDrop:N,children:e.jsxs("div",{className:"flex flex-col justify-center items-center text-[#0B0B0B] space-y-2 h-full w-full text-sm",children:[e.jsx(O,{}),u?e.jsx("p",{className:"text-center font-medium",children:u}):e.jsx("p",{className:"text-center",children:"Drag your file(s) to start uploading"}),e.jsxs("div",{className:"flex items-center justify-center gap-x-2 text-sm text-[#6D6D6D]",children:[e.jsx("div",{className:"border h-0 w-[80px] border-[#E7E7E7]"}),e.jsx("span",{children:"OR"}),e.jsx("div",{className:"border h-0 w-[80px] border-[#E7E7E7]"})]}),e.jsxs("div",{className:"border border-[#565148] rounded-lg py-2 px-4 cursor-pointer",onClick:()=>{var s;return(s=document.getElementById("fileInput"))==null?void 0:s.click()},children:["Browse Files",e.jsx("input",{id:"fileInput",type:"file",className:"hidden",onChange:y,accept:".png,.jpg,.jpeg,.pdf"})]})]})})}),e.jsx("p",{className:"text-[#6D6D6D] text-sm my-4",children:"Support PDF, PNG, JPG"}),e.jsxs("div",{className:"flex justify-end gap-2 mb-3 text-sm",children:[e.jsx(c,{onClick:D,className:"px-10",variant:"secondary",size:"sm",children:"Cancel"}),e.jsx(c,{type:"submit",variant:"primary",className:"px-10",size:"sm",onClick:w,children:"Done"})]})]})})]})};export{k as O};

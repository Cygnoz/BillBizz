import{r as l,D as I,u as y,j as e,y as R,B as T,P as z,M as F,F as q,w as S,e as f,_ as C,a as W,I as P,g as H,E as U,J as V}from"./index-A_edQTkL.js";import{T as G}from"./TableSkelton-L9YeclyQ.js";import{N as J}from"./NoDataFoundTable-hmwFq4Ia.js";import"./NO_DATA-Bek3dUYY.js";const K="/assets/Savings-DKq0hBM3.png",_={accountName:"",accountCode:"",accountSubhead:"Bank",accountHead:"Asset",accountGroup:"Asset",openingBalance:"",openingBalanceDate:"",description:"",bankAccNum:"",bankIfsc:"",bankCurrency:"",debitOpeningBalance:"",creditOpeningBalance:""},L=({page:p,id:w})=>{const[A,D]=l.useState(!1),[r,i]=l.useState(_),[h,E]=l.useState("Debit"),{setBankResponse:m}=l.useContext(I),{request:b}=y("post",5001),{request:v}=y("put",5001),B=()=>{D(!0),d()},[k,g]=l.useState([]),{request:s}=y("get",5004),{request:t}=y("get",5001),d=async()=>{try{const a=`${f.GET_CURRENCY_LIST}`,{response:n,error:x}=await s(a);!x&&n&&(g(n.data),i({...r,bankCurrency:n.data.find(c=>c.baseCurrency).currencyCode}))}catch(a){console.log("Error in fetching currency data",a)}},j=async()=>{try{const a=`${f.GET_ONE_ACCOUNT}/${w}`,{response:n,error:x}=await t(a);!x&&n?(i(n.data),console.log(n.data)):console.error("Failed to fetch one item data.")}catch(a){C.error("Error in fetching one item data."),console.error("Error in fetching one item data",a)}},N=()=>{D(!1)},u=a=>{const{name:n,value:x}=a.target;let c=x;n==="openingBalance"&&parseFloat(x)<0&&(c="0"),n==="openingType"?(E(c),i(o=>({...o,debitOpeningBalance:c==="Debit"?o.openingBalance:"",creditOpeningBalance:c==="Credit"?o.openingBalance:""}))):i(n==="openingBalance"?o=>({...o,debitOpeningBalance:h==="Debit"?c:o.debitOpeningBalance,creditOpeningBalance:h==="Credit"?c:o.creditOpeningBalance}):o=>({...o,[n]:c}))},$=async a=>{a.preventDefault();try{const n=p==="edit"?`${f.EDIT_NEW_ACCOUNT}/${w}`:f.Add_NEW_ACCOUNT,x=p==="edit"?v:b,c=r,{response:o,error:O}=await x(n,c);!O&&o?(C.success(o.data.message),m(M=>({...M,...c})),N(),i(_)):C.error(O.response.data.message)}catch(n){console.error(n)}};return l.useEffect(()=>{j()},[]),e.jsxs("div",{children:[p==="edit"?e.jsxs("button",{onClick:B,children:[" ",e.jsx(R,{size:18,color:"green"})]}):e.jsxs(T,{onClick:B,variant:"primary",size:"xl",children:[e.jsx(z,{color:"white"})," ",e.jsx("p",{className:"text-sm font-medium",children:"Create Account"})]}),e.jsx(F,{open:A,onClose:N,className:"w-[68%] text-start",children:e.jsxs("div",{className:"p-5 mt-3",children:[e.jsxs("div",{className:"mb-5 flex p-4 rounded-xl bg-CreamBg relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 -right-8 w-[178px] h-[89px]",style:{backgroundImage:`url(${q})`,backgroundRepeat:"no-repeat"}}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h3",{className:"text-xl font-bold text-textColor",children:[p==="edit"?"Edit":"Create"," Bank Account"]}),e.jsx("p",{className:"text-dropdownText font-semibold text-sm mt-2",children:"Open a new bank account swiftly and securely."})]}),e.jsx("div",{className:"ms-auto text-3xl cursor-pointer relative z-10",onClick:N,children:"Ã—"})]}),e.jsxs("form",{className:"grid grid-cols-12 gap-4",onSubmit:$,children:[e.jsx("div",{className:"mt-12 col-span-3 justify-items-center ",children:e.jsx("img",{src:K,alt:""})}),e.jsxs("div",{className:"col-span-9",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Account Name"}),e.jsx("input",{type:"text",name:"accountName",value:r.accountName,onChange:u,placeholder:"Value",className:"border-inputBorder w-full text-sm border rounded p-1.5 pl-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Account Code"}),e.jsx("input",{type:"text",name:"accountCode",value:r.accountCode,onChange:u,placeholder:"Value",className:"border-inputBorder w-full text-sm border rounded p-1.5 pl-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 text-labelColor text-sm",children:"Opening Balance"}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"relative w-20 ",children:[e.jsxs("select",{className:`block appearance-none w-full h-9 text-[#818894] bg-white border border-inputBorder \r
                                   text-sm pl-2 pr-2 rounded-l-md leading-tight \r
                                   focus:outline-none focus:bg-white focus:border-gray-500`,name:"openingType",value:h,onChange:u,children:[e.jsx("option",{value:"Debit",children:"Dr"}),e.jsx("option",{value:"Credit",children:"Cr"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(S,{color:"gray"})})]}),e.jsx("input",{type:"number",min:0,className:"text-sm w-[100%] rounded-r-md text-start bg-white border border-slate-300 h-9 p-2",placeholder:"Enter Opening Balance",name:"openingBalance",value:h==="Debit"?r.debitOpeningBalance:r.creditOpeningBalance,onChange:u})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Account Number"}),e.jsx("input",{type:"text",name:"bankAccNum",value:r.bankAccNum,onChange:u,placeholder:"Value",className:"border-inputBorder w-full text-sm border rounded p-1.5 pl-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"IFSC"}),e.jsx("input",{type:"text",name:"bankIfsc",value:r.bankIfsc,onChange:u,placeholder:"Value",className:"border-inputBorder w-full text-sm border rounded p-1.5 pl-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Currency"}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{name:"bankCurrency",value:r.bankCurrency,onChange:u,className:"block appearance-none w-full text-zinc-400 bg-white border border-slate-200 text-sm h-[39px] pl-3 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:k==null?void 0:k.map(a=>e.jsx("option",{value:a.currencyCode,selected:a.currencyName,className:"text-slate-300",children:`${a.currencyName} (${a.currencySymbol})`},a._id))}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(S,{color:"gray"})})]})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Description"}),e.jsx("textarea",{name:"description",value:r.description,onChange:u,placeholder:"Value",className:"border-inputBorder w-full text-sm border rounded p-2 pt-5 pl-2"})]}),e.jsx("br",{}),e.jsxs("div",{className:"flex justify-end gap-2 mb-3",children:[e.jsx(T,{onClick:N,className:"pl-10 pr-10",variant:"secondary",size:"sm",children:"Cancel"}),e.jsx(T,{type:"submit",variant:"primary",className:"pl-10 pr-10",size:"sm",children:"Save"})]})]})]})]})})]})},Y=()=>{const{request:p}=y("get",5001),{request:w}=y("delete",5001),[A,D]=l.useState(""),[r,i]=l.useState([]),{bankResponse:h}=l.useContext(I),E=W(),{loading:m,setLoading:b}=l.useContext(P),v=["Sl.No","Account Name","Account Code","Account Type","Documents","Parent Account Type","Action"];l.useEffect(()=>{B()},[h]);const B=async()=>{try{b({...m,skeleton:!0,noDataFound:!1});const s=`${f.Get_ALL_Acounts}`,t=await p(s),{response:d,error:j}=t;!j&&d?(i(d.data.filter(N=>N.accountSubhead==="Bank")),b({...m,skeleton:!1})):b({...m,skeleton:!1,noDataFound:!0})}catch(s){console.error("Error fetching accounts:",s),b({...m,skeleton:!1,noDataFound:!0})}},k=async s=>{try{const t=`${f.DELETE_ACCONUT}/${s}`,{response:d,error:j}=await w(t);!j&&d?(C.success(d.data.message),B(),console.log(d.data)):C.error(j.response.data.message)}catch(t){C.error("Error in fetching one item data."),console.error("Error in fetching one item data",t)}},g=r.filter(s=>{const t=A.toLowerCase().trim();return s.accountName.toLowerCase().trim().startsWith(t)||s.accountCode.toLowerCase().trim().startsWith(t)||s.accountSubhead.toLowerCase().trim().startsWith(t)||s.accountHead.toLowerCase().trim().startsWith(t)||s.description.toLowerCase().trim().startsWith(t)});return e.jsxs("div",{className:"overflow-x-auto my-3 mx-5",children:[e.jsx("div",{className:"mt-6",children:e.jsx(H,{placeholder:"Search",searchValue:A,onSearchChange:D})}),e.jsx("div",{className:"overflow-y-scroll max-h-[25rem]",children:e.jsxs("table",{className:"min-w-full bg-white my-5",children:[e.jsx("thead",{className:"text-[12px] text-center text-dropdownText",children:e.jsx("tr",{style:{backgroundColor:"#F9F7F0"},children:v.map((s,t)=>e.jsx("th",{className:"py-2 px-4 font-medium border-b border-tableBorder",children:s},t))})}),e.jsx("tbody",{className:"text-dropdownText text-center text-[13px]",children:m.skeleton?[...Array(g.length>0?g.length:5)].map((s,t)=>e.jsx(G,{columns:v},t)):g.length>0?g.reverse().map((s,t)=>e.jsxs("tr",{className:"relative cursor-pointer",children:[e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:t+1}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:s.accountName||"-"}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:s.accountCode||"-"}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:s.accountSubhead||"-"}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:s.description||"-"}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:s.accountHead||"-"}),e.jsx("td",{className:"cursor-pointer py-2.5 px-4 border-y border-tableBorder",children:e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx("div",{onClick:()=>E(`/accountant/view/${s._id}?fromBank=true`),children:e.jsx(U,{color:"#569FBC"})}),e.jsxs("div",{children:[e.jsx(L,{id:s._id,page:"edit"})," "]}),e.jsxs("button",{onClick:()=>k(s._id),children:["   ",e.jsx(V,{color:"red",size:18})]})]})})]},s._id)):e.jsx(J,{columns:v})})]})})]})};function se({}){return e.jsxs("div",{className:"mx-5 my-4  h-[100vh]",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-2xl text-textColor",children:"Bank"}),e.jsx("p",{className:"text-sm text-gray mt-1",children:"Providing essential details for managing financial transactions. Manage your banking details securely and efficiently"})]}),e.jsxs("div",{className:"ml-auto gap-3 flex items-center",children:[e.jsx(L,{}),e.jsx("div",{className:"cursor-pointer"})]}),e.jsx("div",{})]}),e.jsx("div",{className:"mt-5 bg-white",children:e.jsx("div",{children:e.jsx(Y,{})})})]})}export{se as default};

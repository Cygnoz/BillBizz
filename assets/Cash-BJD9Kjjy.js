import{r as l,u as C,K as E,j as e,B as T,P as _,M as L,F as $,w as z,e as y,_ as g,a as F,I,g as M,E as P,J as R}from"./index-A_edQTkL.js";import{P as q}from"./PencilEdit-YyKjeo-p.js";import{N as G}from"./NoDataFoundTable-hmwFq4Ia.js";import{T as H}from"./TableSkelton-L9YeclyQ.js";import"./NO_DATA-Bek3dUYY.js";const U="/assets/Group%2011-Crj6VDnw.png",D=({page:x,id:N})=>{const[v,w]=l.useState(!1),f={accountName:"",accountCode:"",accountSubhead:"Cash",accountHead:"Asset",accountGroup:"Asset",openingBalance:"",openingBalanceDate:"",description:"",debitOpeningBalance:"",creditOpeningBalance:""},[i,d]=l.useState(f),[r,p]=l.useState("Debit"),{request:A}=C("post",5001),{request:h}=C("put",5001),{setCashResponse:O}=l.useContext(E),B=()=>{w(!0),x=="edit"&&m()},u=()=>{w(!1),d(f)},s=c=>{const{name:a,value:j}=c.target;let o=j;a==="openingBalance"&&parseFloat(j)<0&&(o="0"),a==="openingType"?(p(o),d(n=>({...n,debitOpeningBalance:o==="Debit"?n.openingBalance:"",creditOpeningBalance:o==="Credit"?n.openingBalance:""}))):d(a==="openingBalance"?n=>({...n,debitOpeningBalance:r==="Debit"?o:n.debitOpeningBalance,creditOpeningBalance:r==="Credit"?o:n.creditOpeningBalance}):n=>({...n,[a]:o}))},{request:t}=C("get",5001),m=async()=>{try{const c=`${y.GET_ONE_ACCOUNT}/${N}`,{response:a,error:j}=await t(c);!j&&a?(d(a.data),console.log(a.data)):console.error("Failed to fetch one item data.")}catch(c){g.error("Error in fetching one item data."),console.error("Error in fetching one item data",c)}};console.log(N,"id");const b=async c=>{c.preventDefault();try{const a=x==="edit"?`${y.EDIT_NEW_ACCOUNT}/${N}`:y.Add_NEW_ACCOUNT,j=x==="edit"?h:A,o=i,{response:n,error:k}=await j(a,o);!k&&n?(g.success(n.data.message),O(S=>({...S,...o})),u(),d(f)):g.error(k.response.data.message)}catch(a){console.error(a)}};return e.jsxs("div",{children:[x==="edit"?e.jsx("div",{onClick:B,className:"cursor-pointer",children:e.jsx(q,{color:"#0B9C56"})}):e.jsx(T,{onClick:B,variant:"primary",className:"flex items-center justify-center",size:"sm",children:e.jsxs("span",{className:"flex items-center ",children:[e.jsx(_,{color:""}),"   ",e.jsx("p",{className:"text-sm",children:"Create Account"})]})}),e.jsx(L,{open:v,onClose:u,className:"text-start w-[60%]",children:e.jsxs("div",{className:"p-5 mt-3",children:[e.jsxs("div",{className:"mb-5 flex p-4 rounded-xl bg-CreamBg relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 -right-8 w-[px] h-[89px]",style:{backgroundImage:`url(${$})`,backgroundRepeat:"no-repeat"}}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h3",{className:"text-xl font-bold text-textColor",children:[x==="edit"?"Edit":"Create"," Cash Account"]}),e.jsx("p",{className:"text-dropdownText font-semibold text-sm mt-2",children:"Set up your cash account effortlessly!"})]}),e.jsx("div",{className:"ms-auto text-3xl cursor-pointer relative z-10",onClick:u,children:"×"})]}),e.jsxs("form",{className:"flex justify-between",onSubmit:b,children:[e.jsx("div",{className:"mt-16 ms-3 ",children:e.jsx("img",{width:250,height:130,src:U,alt:"Cash"})}),e.jsxs("div",{className:"w-[65%]",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Account Name"}),e.jsx("input",{type:"text",name:"accountName",value:i.accountName,onChange:s,placeholder:"Value",className:"border-inputBorder w-full text-sm border rounded p-1.5 pl-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Account Code"}),e.jsx("input",{type:"text",name:"accountCode",value:i.accountCode,onChange:s,placeholder:"Value",className:"border-inputBorder w-full text-sm border rounded p-1.5 pl-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 text-labelColor text-sm",children:"Opening Balance"}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"relative w-20 ",children:[e.jsxs("select",{className:`block appearance-none w-full h-9 text-[#818894] bg-white border border-inputBorder \r
                                   text-sm pl-2 pr-2 rounded-l-md leading-tight \r
                                   focus:outline-none focus:bg-white focus:border-gray-500`,name:"openingType",value:r,onChange:s,children:[e.jsx("option",{value:"Debit",children:"Dr"}),e.jsx("option",{value:"Credit",children:"Cr"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(z,{color:"gray"})})]}),e.jsx("input",{type:"number",className:"text-sm w-[100%] rounded-r-md text-start bg-white border border-slate-300 h-9 p-2",placeholder:"Enter Opening Balance",name:"openingBalance",value:r==="Debit"?i.debitOpeningBalance:i.creditOpeningBalance,onChange:s})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Description"}),e.jsx("textarea",{name:"description",value:i.description,onChange:s,placeholder:"Value",className:"border-inputBorder w-full text-sm border rounded p-2 pt-5 pl-2"})]}),e.jsx("br",{}),e.jsxs("div",{className:"flex justify-end gap-2 mb-3",children:[e.jsx(T,{onClick:u,className:"pl-10 pr-10",variant:"secondary",size:"sm",children:"Cancel"}),e.jsx(T,{type:"submit",variant:"primary",className:"pl-10 pr-10",size:"sm",children:"Save"})]})]})]})]})})]})},V=()=>{const[x,N]=l.useState([]),[v,w]=l.useState(""),{request:f}=C("get",5001),{cashResponse:i}=l.useContext(E),d=F(),{loading:r,setLoading:p}=l.useContext(I);l.useEffect(()=>{A()},[i]);const A=async()=>{try{p({...r,skeleton:!0,noDataFound:!1});const s=`${y.Get_ALL_Acounts}`,{response:t,error:m}=await f(s);if(!m&&t){const b=t.data.filter(c=>c.accountSubhead==="Cash");N(b),p({...r,skeleton:!1})}else p({...r,skeleton:!1,noDataFound:!0})}catch(s){console.error("Error fetching accounts:",s),p({...r,skeleton:!1,noDataFound:!0})}},h=x.filter(s=>{const t=v.toLowerCase();return s.accountName.toLowerCase().includes(t)||s.accountCode.toLowerCase().includes(t)||s.accountSubhead.toLowerCase().includes(t)||s.accountHead.toLowerCase().includes(t)||s.description.toLowerCase().includes(t)}),{request:O}=C("delete",5001),B=async s=>{try{const t=`${y.DELETE_ACCONUT}/${s}`,{response:m,error:b}=await O(t);!b&&m?(g.success(m.data.message),A(),console.log(m.data)):g.error(b.response.data.message)}catch(t){g.error("Error in fetching one item data."),console.error("Error in fetching one item data",t)}},u=["Sl.No","Account Name","Account Code","Account Type","Parent Account Type","Action"];return e.jsxs("div",{children:[e.jsx(M,{placeholder:"Search",searchValue:v,onSearchChange:w}),e.jsx("div",{className:"max-h-[25rem] overflow-y-auto mt-3",children:e.jsxs("table",{className:"min-w-full bg-white mb-5",children:[e.jsx("thead",{className:"text-[12px] text-center text-dropdownText sticky top-0 z-10",children:e.jsx("tr",{style:{backgroundColor:"#F9F7F0"},children:u.map((s,t)=>e.jsx("th",{className:"py-3 px-4 border-b border-tableBorder font-medium",children:s},t))})}),e.jsx("tbody",{className:"text-dropdownText text-center text-[13px]",children:r.skeleton?[...Array(h.length>0?h.length:5)].map((s,t)=>e.jsx(H,{columns:u},t)):h.length>0?h.map((s,t)=>e.jsxs("tr",{className:"relative cursor-pointer",children:[e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:t+1}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:s.accountName}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:s.accountCode}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:s.accountSubhead}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:s.accountHead}),e.jsx("td",{className:"py-2.5 px-4 border-y border-tableBorder",children:e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("button",{onClick:()=>d(`/accountant/view/${s._id}?fromCash=true`),className:"cursor-pointer",children:e.jsx(P,{color:"#569FBC"})}),e.jsx("div",{children:e.jsx(D,{page:"edit",id:s._id})}),e.jsxs("button",{onClick:()=>B(s._id),children:["   ",e.jsx(R,{color:"red",size:18})]})]})})]},s._id)):e.jsx(G,{columns:u})})]})})]})};function Y({}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mx-5 my-4 ",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-2xl text-textColor",children:"Cash"}),e.jsx("p",{className:"text-sm text-gray mt-1",children:"Manage your cash asset effectively with detailed insights into each account. Allowing for easy identification and organization of funds."})]}),e.jsxs("div",{className:"ml-auto gap-3 flex items-center",children:[e.jsx(D,{}),e.jsx("div",{className:"cursor-pointer"})]}),e.jsx("div",{})]}),e.jsx("div",{className:"mt-5 p-6 bg-white px-4 rounded",children:e.jsx("div",{className:"mt-2",children:e.jsx(V,{})})})]})})}export{Y as default};

import{a as b,r as a,u as v,I as y,ah as w,j as e,e as u,L as C,B as k,P as E,f as N}from"./index-A_edQTkL.js";import{A as P,a as x}from"./ArrowUpIcon-BSlCnyZT.js";import{R as D}from"./RefreshIcon-3pGUrNkg.js";import{P as A}from"./PurchaseTable-CRBE_ojU.js";import"./TableSkelton-L9YeclyQ.js";import"./NoDataFoundTable-hmwFq4Ia.js";import"./NO_DATA-Bek3dUYY.js";import"./PrintButton-wNIz7Qro.js";import"./PrinterIcon-wSfdPfNy.js";import"./Pagination-CosxQtyN.js";const B=()=>{const o=b(),[i]=a.useState([{id:"paymentDate",label:"Date",visible:!0},{id:"paymentMade",label:"Payment#",visible:!0},{id:"supplierDisplayName",label:"Vendor Name",visible:!0},{id:"bill",label:"Bill#",visible:!0},{id:"paymentMode",label:"Mode",visible:!0},{id:"total",label:"Amount",visible:!0}]),[r,m]=a.useState([]),{request:c}=v("get",5005),{loading:n,setLoading:s}=a.useContext(y),{purchaseResponse:p}=a.useContext(w),h=async()=>{try{s({...n,skeleton:!0,noDataFound:!1});const t=`${u.GET_PAYMENTMADE}`,{response:l,error:d}=await c(t);!d&&l?(m(l.data.allPayments),s({...n,skeleton:!1})):(console.error(d),s({...n,skeleton:!1,noDataFound:!0}))}catch(t){console.error(t),s({...n,skeleton:!1,noDataFound:!0})}};a.useEffect(()=>{h()},[p]);const f=t=>{o(`/purchase/payment-made/view/${t}`)},g=t=>{o(`/purchase/payment-made/edit/${t}`)},j=(t,l)=>t==="bill"&&l.unpaidBills?l.unpaidBills.map(d=>d.billNumber).join(", "):l[t];return e.jsx(A,{page:"Bills",columns:i,data:r,onRowClick:f,renderColumnContent:j,searchPlaceholder:"Search Payments",loading:n.skeleton,searchableFields:["paymentDate","supplierDisplayName"],onEditClick:g,deleteUrl:u.DELETE_PAYMENT_MADE})},$=({})=>{const[o,i]=a.useState(!1),r=a.useRef(null),m=()=>{i(!o)},c=s=>{r.current&&!r.current.contains(s.target)&&i(!1)};a.useEffect(()=>(document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}),[]);const n=[{icon:e.jsx(P,{}),text:"Import Payment",onClick:()=>{console.log("Import Sales Order clicked")}},{icon:e.jsx(x,{}),text:"Export Payment",onClick:()=>{console.log("Export Sales Order clicked")}},{icon:e.jsx(x,{}),text:"Export Current View",onClick:()=>{console.log("Export Current View clicked")}},{icon:e.jsx(D,{color:"#4B5C79"}),text:"Refresh List",onClick:()=>{console.log("Refresh List clicked")}}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-6 flex   items-center relative",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-2xl text-textColor",children:"Payment"}),e.jsx("p",{className:"text-sm text-gray mt-1",children:"Comprehensive invoicing that includes purchase details such as order date, supplier name, total amounts due for clear and accurate financial tracking"})]}),e.jsxs("div",{className:"ml-auto gap-3 flex items-center",children:[e.jsx(C,{to:"/purchase/payment-made/new-payment-made",children:e.jsxs(k,{variant:"primary",size:"sm",children:[e.jsx(E,{color:"white"}),e.jsx("p",{className:"text-sm font-medium",children:"New Payment"})]})}),e.jsx("div",{onClick:m,className:"cursor-pointer",children:e.jsx(N,{})}),o&&e.jsx("div",{ref:r,className:"absolute top-16 right-4 mt-2 w-48 bg-white shadow-xl z-10",children:e.jsx("ul",{className:"py-1 text-dropdownText",children:n.map((s,p)=>e.jsxs("li",{onClick:s.onClick,className:"px-4 py-2 flex items-center gap-2 hover:bg-orange-100 rounded-md text-sm cursor-pointer",children:[s.icon,s.text]},p))})})]})]}),e.jsx("div",{className:"px-6 mt-3",children:e.jsxs("div",{className:"bg-white p-5",children:[e.jsx("div",{className:"w-[100%] p-3 bg-gray-100"}),e.jsx("div",{className:"p-3",children:e.jsx(B,{})})]})})]})};export{$ as default};

import{u as c,r as o,j as e,M as b,U as q,g as T,w as P,B as d,P as I,T as L,e as x,_ as l}from"./index-A_edQTkL.js";import{P as O}from"./PencilEdit-YyKjeo-p.js";function F({isOpen:w,onClose:m,page:f}){const{request:E}=c("put",5003),{request:k}=c("delete",5003),{request:M}=c("put",5003),{request:B}=c("post",5003),[p,h]=o.useState({name:"",description:"",type:"category"}),[u,j]=o.useState([]),[n,v]=o.useState(!1),[S,y]=o.useState(!1),[D,_]=o.useState(""),i=()=>{y(!1)},g=async()=>{try{const s=`${x.GET_ALL_BRMC}`,t={type:"category"},{response:a,error:r}=await E(s,t);!r&&a?j(a.data):console.error("Failed to fetch Category data.")}catch(s){l.error("Error in fetching Category data."),console.error("Error in fetching Category data",s)}};o.useEffect(()=>{g()},[]);const C=s=>{console.log(s,"item"),s?(v(!0),h({_id:s.id,name:s.categoriesName,description:s.description,type:s.type||"category"})):(v(!1),h({name:"",description:"",type:"category"})),y(!0)},z=async()=>{try{const s=n?`${x.UPDATE_BRMC}`:`${x.ADD_BRMC}`,t=n?M:B,{response:a,error:r}=await t(s,p);r?(l.error(r.response.data.message),console.error(`Error saving category: ${r.message}`)):a&&(l.success(`Category ${n?"updated":"added"} successfully.`),i(),g())}catch(s){l.error("Error in save operation."),console.error("Error in save operation",s)}},A=async s=>{try{const t=`${x.DELETE_BRMC}/${s.id}`,{response:a,error:r}=await k(t);!r&&a?(l.success("Category deleted successfully!"),u.length==1&&j(R=>R.filter($=>$._id!==s._id)),g()):l.error(r.response.data.message)}catch{l.error("Error occurred while deleting Category.")}},N=s=>{const{name:t,value:a}=s.target;h(r=>({...r,[t]:a}))};return e.jsx(b,{open:w,onClose:m,className:"w-[65%]",children:e.jsxs("div",{className:"p-5 mt-3",children:[e.jsxs("div",{className:"mb-5 flex p-4 rounded-xl bg-CreamBg relative overflow-hidden h-24",children:[e.jsx("div",{className:"absolute top-0 right-12 h-24 w-[200px] bg-cover bg-no-repeat",style:{backgroundImage:`url(${q})`}}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-xl font-bold text-textColor",children:"Manage Category"}),e.jsx("p",{className:"text-dropdownText font-semibold text-sm mt-2",children:"Have an insight on the profit or loss incurred due to the change in exchange rates"})]}),e.jsx("div",{className:"ms-auto text-3xl cursor-pointer relative z-10",onClick:m,children:"×"})]}),e.jsxs("div",{className:"flex",children:[f==="expense"&&e.jsxs("div",{className:"grid grid-flow-col items-center gap-3 ",children:[e.jsx("div",{className:"w-96",children:e.jsx(T,{placeholder:"Search Name or Mobile",searchValue:D,onSearchChange:_})}),e.jsx("div",{children:e.jsxs("div",{className:"relative w-full items-center justify-center flex",children:[e.jsx("select",{className:"block appearance-none w-full h-10 text-zinc-400 bg-white border border-inputBorder text-sm pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:e.jsx("option",{value:"",className:"text-gray",children:"All Category"})}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(P,{color:"gray"})})]})})]}),e.jsx("div",{className:"flex ml-auto me-2 my-4",children:e.jsxs(d,{variant:"primary",size:"xl",onClick:()=>C(),children:[e.jsx(I,{color:"white"}),e.jsx("p",{className:"text-sm",children:"Add Category"})]})})]}),e.jsx("div",{className:"grid grid-cols-3 gap-5",children:u.length===0?e.jsx("p",{className:"text-center col-span-3 text-red-500 font-semibold",children:"No categories found !"}):u.map(s=>e.jsx("div",{className:"flex p-2",children:e.jsxs("div",{className:"border border-slate-200 text-textColor rounded-xl w-96 h-auto p-3 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold",children:s.categoriesName}),e.jsx("p",{className:"text-xs text-textColor",children:s.description})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("p",{className:"cursor-pointer",onClick:()=>C(s),children:e.jsx(O,{color:"currentColor"})}),e.jsx("p",{className:"cursor-pointer",onClick:()=>A(s),children:e.jsx(L,{color:"currentColor"})})]})]})},s.id))}),f!=="expense"&&e.jsx("div",{className:"flex justify-end gap-2 my-3",children:e.jsx(d,{className:"flex justify-center px-8",variant:"primary",size:"sm",onClick:m,children:"Done"})}),e.jsx(b,{open:S,onClose:i,style:{width:"35%"},children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex p-4 rounded-xlrelative overflow-hidden h-24",children:[e.jsx("div",{className:"relative z-10",children:e.jsxs("h3",{className:"text-xl font-bold text-textColor",children:[n?"Edit":"Add"," Category"]})}),e.jsx("div",{className:"ms-auto text-3xl cursor-pointer relative z-10",onClick:i,children:"×"})]}),e.jsxs("form",{className:"grid gap-5",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Name"}),e.jsx("input",{type:"text",placeholder:"Enter category name",name:"name",value:p.name,onChange:N,className:"w-full h-10 px-3 mt-1 text-sm bg-white border border-inputBorder rounded-md focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Description"}),e.jsx("textarea",{rows:4,placeholder:"Enter description",name:"description",value:p.description,onChange:N,className:"border-inputBorder w-full text-sm border rounded p-1.5 pl-2 "})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(d,{variant:"secondary",size:"sm",className:"text-sm pl-6 pr-6",onClick:i,children:"Cancel"})," ",e.jsx(d,{variant:"primary",size:"sm",className:"text-sm pl-8 pr-8",onClick:z,children:"Save"})]})]})]})})]})})}export{F as C};

import{u as N,r as p,j as e,e as g,a as y,Z as E,X as w,x as S}from"./index-A_edQTkL.js";import{T as A,P as R}from"./PaymentViewTypes-BD9VPuvB.js";function C({data:s,organization:d}){var o;const{request:a}=N("get",5002),{request:j}=N("get",5004),[t,f]=p.useState([]);console.log(t,"supplier");const[m,r]=p.useState([]),l=new A.ToWords({localeCode:"en-IN",converterOptions:{ignoreDecimal:!0,ignoreZeroCurrency:!0}}),b=async()=>{try{const c=`${g.GET_ONE_CUSTOMER}/${s.customerId}`,{response:h,error:i}=await a(c);!i&&h?f(h.data):console.log("Error in fetching Supplier ,",i)}catch(c){console.log("Error in fetching Supplier ,",c)}},v=async()=>{try{const c=`${g.GET_CURRENCIES}`,{response:h,error:i}=await j(c);!i&&h?r(h.data):console.log("Error in fetching Supplier ,",i)}catch(c){console.log("Error in fetching Supplier ,",c)}};console.log(s,"data");const x=m.find(c=>c.baseCurrency===!0);console.log(x);const n=x?`${x==null?void 0:x.currencyName} ${s!=null&&s.amountReceived&&!isNaN(Number(s==null?void 0:s.amountReceived))?l==null?void 0:l.convert(Number(s==null?void 0:s.amountReceived)):"Zero"} Only`:"Currency not found";return p.useEffect(()=>{b(),v()},[s]),e.jsx("div",{className:" flex justify-center",children:e.jsxs("div",{className:"bg-white drop-shadow-2xl w-[595px] p-8 pl-[24px] pr-[24px]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 mt-1",children:[e.jsx("div",{children:e.jsx("img",{src:d==null?void 0:d.organizationLogo,alt:"Company Logo",className:"h-[49px] w-[71px] object-cover"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-xl font-bold text-textColor",children:"Customer Receipt"}),e.jsx("h3",{className:"font-normal text-sm mt-[14px] text-pdftext",children:t==null?void 0:t.companyName}),e.jsxs("p",{className:"font-normal text-sm text-pdftext",children:[t.customerEmail&&t.customerEmail," ",(t==null?void 0:t.mobile)&&`| +${t.mobile}`]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[e.jsxs("div",{className:"grid grid-cols-2 items-center space-y-3",children:[e.jsx("p",{className:"font-normal text-xs text-pdftext",children:"Payment Date"}),e.jsx("p",{className:"text-xs  text-pdftext text-end",children:s!=null&&s.paymentDate?s==null?void 0:s.paymentDate:"-"}),e.jsx("p",{className:"font-normal text-xs text-pdftext",children:"Payment Mode"}),e.jsx("p",{className:"text-xs  text-pdftext text-end",children:s!=null&&s.paymentMode?s.paymentMode:"-"})]}),e.jsx("div",{className:"flex items-center justify-center ",children:e.jsxs("div",{className:"bg-gradient-to-r from-[#E3E6D5] to-[#F7E7CE] px-8 flex justify-center items-center flex-col py-5 rounded-sm",children:[e.jsx("h3",{className:"text-[14px] font-bold ",children:"Amount Received"}),e.jsxs("p",{className:"text-base  font-bold text-end",children:[x==null?void 0:x.currencySymbol,"   ",s!=null&&s.amountReceived?s.amountReceived:"-"]})]})})]}),e.jsxs("div",{className:"flex gap-4 pb-5",children:[" ",e.jsx("p",{className:"font-normal text-xs text-pdftext",children:"Amount Received in Words"}),e.jsx("p",{className:"text-xs  text-pdftext text-end",children:n||"-"})]}),e.jsxs("table",{className:"w-full mb-8 border border-dropdownBorder mt-5",children:[e.jsx("thead",{className:"border-b border-dropdownBorder bg-gray-100",children:e.jsxs("tr",{className:"font-bold text-[10px] text-pdftext text-center",children:[e.jsx("th",{className:"py-2 px-4",children:"Invoice Number"}),e.jsx("th",{className:"py-2 px-4",children:"Invoice Date "}),e.jsx("th",{className:"py-2 px-4",children:"Invoice Amount"}),e.jsx("th",{className:"py-2 px-4",children:"Payment Amount"})]})}),(o=s==null?void 0:s.invoice)==null?void 0:o.map(c=>e.jsx("tbody",{children:e.jsxs("tr",{className:"text-[10px] text-center",children:[e.jsx("td",{className:"py-2 px-4",children:c==null?void 0:c.salesInvoice}),e.jsx("td",{className:"py-2 px-4",children:c==null?void 0:c.salesInvoiceDate}),e.jsx("td",{className:"py-2 px-4",children:c==null?void 0:c.totalAmount}),e.jsx("td",{className:"py-2 px-4",children:c==null?void 0:c.paymentAmount})]})}))]}),e.jsxs("div",{className:"mb-8 text-xs space-y-2",children:[e.jsx("h3",{className:"font-normal text-xs text-pdftext",children:"Bill to"}),e.jsx("p",{className:"text-pdftext text-sm font-bold ",children:t.companyName}),e.jsxs("p",{className:"font-normal text-xs text-pdftext",children:[t.customerEmail&&t.customerEmail," ",(t==null?void 0:t.mobile)&&`| +${t.mobile}`]}),e.jsxs("p",{className:"font-normal text-xs text-pdftext ",children:[t==null?void 0:t.billingAddressStreet1,(t==null?void 0:t.billingAddressStreet1)&&(t==null?void 0:t.billingAddressStreet2)&&",",t==null?void 0:t.billingAddressStreet2]})," ",e.jsxs("p",{children:[t==null?void 0:t.supplierCity," ",t==null?void 0:t.billingPinCode]})," ",e.jsxs("p",{children:[t.billingState,",",t.billingCountry," "]})]}),e.jsxs("div",{className:"w-full mt-[64px] gap-2 mb-[55.5px] flex  items-center",children:[e.jsx("p",{className:"text-pdftext text-xs font-normal",children:"Signature"}),e.jsx("div",{className:"border-t border-[0.5px] border-loremcolor w-[40%]"})]})]})})}function F({data:s}){var m;const[d,a]=p.useState(0),j=y(),t=r=>{a(r)},f=r=>{const l={page:"invoice"};j(`/sales/viewsalesorder/${r}`,{state:l})};return e.jsxs("div",{className:"bg-[#F6F6F6] rounded-md px-3 py-6 space-y-4",children:[e.jsx("div",{children:e.jsx(R,{})}),(m=s==null?void 0:s.invoice)==null?void 0:m.map((r,l)=>e.jsxs("div",{onClick:()=>{t(l),f(r.invoiceId)},className:`text-[#303F58] p-4 rounded-md mb-4 space-y-2 ${d===l?"bg-white":""} cursor-pointer`,children:[e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("p",{children:s==null?void 0:s.customerName}),e.jsxs("div",{className:"flex justify-end",children:[" ",e.jsx("p",{className:"ms-auto",children:r==null?void 0:r.totalAmount})]})]}),e.jsxs("p",{children:[r==null?void 0:r.salesInvoiceDate," | ",r==null?void 0:r.salesInvoice]}),e.jsxs("p",{className:"font-bold",children:["Mode: ",s==null?void 0:s.paymentMode]})]},l))]})}function $({}){const[s,d]=p.useState([]),[a,j]=p.useState([]),{request:t}=N("get",5007),{organization:f}=E(),{id:m}=w(),r=y(),l=()=>{r(-1)},b=async()=>{var n,o;try{const c=`${g.GET_ONE_SALES_RECIEPT}/${m}`,h=await t(c),{response:i,error:u}=h;!u&&i?(d(i.data),console.log(i.data,"as")):console.error("API Error:",((o=(n=u==null?void 0:u.response)==null?void 0:n.data)==null?void 0:o.message)||"Unknown error")}catch(c){console.error("Failed to fetch settings:",c)}},{request:v}=N("get",5007),x=async()=>{try{const n=`${g.GET_SALES_RECIEPT_JOURNAL}/${m}`,{response:o,error:c}=await v(n);!c&&o&&(j(o.data),console.log(o.data,"journla"))}catch(n){console.error("Error fetching sales order:",n)}};return p.useEffect(()=>{b(),x()},[]),e.jsxs("div",{className:"p-6 text-pdftext bg-white rounded-lg mx-7",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{onClick:l,style:{borderRadius:"50%"},className:"w-[40px] h-[40px] flex items-center justify-center bg-[#F6F6F6]",children:e.jsx(S,{})}),e.jsx("h1",{className:"text-[20px] font-bold text-[#303F58]",children:"View Reciept"})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"space-x-3 items-center flex text-[#303F58] font-bold text-[16px] mb-4",children:[e.jsx("h3",{children:"Reciept"}),e.jsx("h3",{className:"font-normal",children:"|"}),e.jsx("h3",{children:s==null?void 0:s.payment}),e.jsx("p",{className:"w-[47px] h-[25px] bg-[#F3F3F3] rounded-lg flex items-center justify-center",children:"Draft"})]})}),e.jsx("hr",{className:"mb-5 border-loremcolor"}),e.jsxs("div",{className:"grid grid-cols-3 space-x-4",children:[e.jsx(F,{data:s}),e.jsx("div",{className:"col-span-2",children:e.jsx(C,{data:s,organization:f})})]}),e.jsx("div",{children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 rounded-lg bg-[#F6F6F6] mt-6",children:[e.jsx("h2",{className:"font-semibold text-base mb-4 text-textColor",children:"Invoice"}),e.jsxs("div",{className:"grid grid-cols-3 font-bold gap-x-4 text-base text-dropdownText mb-2",children:[e.jsx("div",{children:"Account"}),e.jsx("div",{className:"text-right",children:"Debit"}),e.jsx("div",{className:"text-right",children:"Credit"})]}),a.map(n=>e.jsxs("div",{className:"grid grid-cols-3 text-dropdownText gap-x-4 text-base mb-2",children:[e.jsx("div",{className:"text-sm",children:n.accountName}),e.jsx("div",{className:"text-right",children:n.debitAmount.toFixed(2)}),e.jsx("div",{className:"text-right",children:n.creditAmount.toFixed(2)})]},n._id)),e.jsxs("div",{className:"grid grid-cols-3 gap-x-4 text-lg font-bold text-[#0B1320] mt-5",children:[e.jsx("div",{className:"text-base",children:"Total"}),e.jsx("div",{className:"text-right",children:a.reduce((n,o)=>n+o.debitAmount,0).toFixed(2)}),e.jsx("div",{className:"text-right",children:a.reduce((n,o)=>n+o.creditAmount,0).toFixed(2)})]})]}),e.jsx("hr",{className:"mt-6 border-t border-inputBorder"})]})})]})}export{$ as default};

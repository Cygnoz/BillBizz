import{r as o,u as x,X as fe,a as be,c as Ne,j as e,L as je,x as ge,w as h,g as ye,af as ve,a9 as we,B as k,e as m,_ as f}from"./index-A_edQTkL.js";import{P as De}from"./PrinterIcon-wSfdPfNy.js";import{N as Se,V as Ce}from"./ViewDetails-BcWc8Pmq.js";import"./ScanEye-DNEuGJ6s.js";const Pe=({page:g})=>{var z;const[_,U]=o.useState(""),[y,w]=o.useState(null),D=o.useRef(null),[N,S]=o.useState([]),[p,C]=o.useState([]),[i,q]=o.useState([]),[R,V]=o.useState([]),[M,Q]=o.useState([]),[F,X]=o.useState([]),[A,T]=o.useState(!1),[v,Y]=o.useState([]),[E,H]=o.useState(null),[W,Z]=o.useState({dueDate:!1,billDate:!1,supplierId:!1,sourceOfSupply:!1,destinationOfSupply:!1}),{request:O}=x("get",5009),{request:J}=x("get",5004),{request:K}=x("get",5004),{request:ee}=x("post",5005),{request:te}=x("get",5005),{request:se}=x("get",5001),{request:ae}=x("get",5005),{request:ne}=x("get",5005),{request:le}=x("put",5005),{id:I}=fe(),re=be(),oe=Ne(),ie=new URLSearchParams(oe.search).get("id"),[t,c]=o.useState({supplierId:"",supplierDisplayName:"",billNumber:"",supplierInvoiceNum:"",sourceOfSupply:"",destinationOfSupply:"",taxMode:"",orderNumber:"",purchaseOrderDate:"",expectedShipmentDate:"",paymentTerms:"Pay Now",paymentMode:"Cash",PaidThrough:"",billDate:new Date().toISOString().slice(0,10),dueDate:"",items:[{itemId:"",itemName:"",itemQuantity:"",itemCostPrice:"",itemDiscount:"",itemDiscountType:"percentage",itemTax:"",itemSgst:"",itemCgst:"",itemIgst:"",itemVat:"",itemSgstAmount:"",itemCgstAmount:"",taxPreference:"",purchaseAccountId:""}],otherExpenseAccountId:"",otherExpenseAmount:"",otherExpenseReason:"",vehicleNo:"",freightAccountId:"",freightAmount:"",addNotes:"",termsAndConditions:"",attachFiles:"",subTotal:"",totalItem:"",sgst:"",cgst:"",igst:"",transactionDiscountType:"percentage",transactionDiscount:"",transactionDiscountAmount:"",totalTaxAmount:"",itemTotalDiscount:"",roundOffAmount:"",paidStatus:"",shipmentPreference:"",grandTotal:"",balanceAmount:"",paidAmount:"",paidAccountId:"",purchaseOrderId:""}),ce=s=>{w(s===y?null:s);const a=`${m.GET_ALL_SUPPLIER}`;b(a,S,O)},B=s=>{D.current&&!D.current.contains(s.target)&&w(null)},b=async(s,a,l)=>{try{const{response:n,error:r}=await l(s);if(!r&&n)if(s.includes(m.GET_ONE_SALES_ORDER)){const u=parseFloat(n.data.grandTotal)||0,j=parseFloat(n.data.transactionDiscountAmount)||0;c(L=>({...L,...n.data,grandTotal:u,transactionDiscountAmount:j}))}else a(n.data);else console.error("Error in response or no data received:",r)}catch(n){console.error("Error fetching data:",n)}},de=()=>{if(i.organizationCountry){const s=F.find(a=>a.name.toLowerCase()===i.organizationCountry.toLowerCase());if(i&&c(a=>({...a,destinationOfSupply:i.state})),s){const a=s.states;V(a)}else console.log("Country not found")}else console.log("No country selected")},ue=()=>{if(p.billingCountry){const s=F.find(a=>a.name.toLowerCase()===p.billingCountry.toLowerCase());if(p&&c(a=>({...a,sourceOfSupply:p.billingState,supplierDisplayName:p.supplierDisplayName})),s){const a=s.states;Q(a)}else console.log("Country not found")}else console.log("No country selected")},me=async()=>{try{const s=`${m.GET_COUNTRY_DATA}`,{response:a,error:l}=await K(s);!l&&a&&X(a.data[0].countries)}catch(s){console.log("Error in fetching Country",s)}},P=o.useRef(!1),G=((s,a,l)=>s.filter(n=>{var r;return(r=n[a])==null?void 0:r.toLowerCase().includes(l.toLowerCase())}))(N,"supplierDisplayName",_),d=s=>{const{name:a,value:l}=s.target;if(a==="dueDate"){const n=new Date(l),r=new Date(t.billDate);if(n<r){f.error("Due Date cannot be before the Bill Date.");return}}if(a==="paidAmount"){let n=parseFloat(l)||"";const r=Number(t.grandTotal)||"";n>r?(P.current||(f.error("Paid Amount cannot exceed Grand Total."),P.current=!0),n=r):P.current=!1,c(u=>({...u,paidAmount:n}));return}if(a==="transactionDiscount"){let n=parseFloat(l)||0;const r=Number(t.subTotal)||0;t.transactionDiscountType==="percentage"?n>100&&(n=100,f.error("Discount cannot exceed 100%")):n>r&&(n=r,f.error("Discount cannot exceed the subtotal amount")),c(u=>({...u,[a]:n}));return}if(a==="purchaseOrderDate"||a==="expectedShipmentDate"){c(n=>({...n,[a]:l})),a==="expectedShipmentDate"&&t.purchaseOrderDate&&new Date(l)<new Date(t.purchaseOrderDate)&&(f.error("Expected Shipment Date cannot be earlier than Purchase Order Date."),c(n=>({...n,expectedShipmentDate:""})));return}c(n=>({...n,[a]:l}))},$=(s,a=0)=>{const l=s.getFullYear(),n=s.getMonth()+a+1;return new Date(l,n,1)};o.useEffect(()=>{if(t.billDate){const s=new Date(t.billDate);let a=new Date(s);switch(t.paymentTerms){case"Net 15":case"Net 30":case"Net 45":case"Net 60":const l=parseInt(t.paymentTerms.split(" ")[1],10);a.setDate(s.getDate()+l);break;case"End of Next Month":a=$(s,1);break;case"End of This Month":a=$(s);break;case"Pay Now":case"due on receipt":a=s;break}c(l=>({...l,dueDate:a.toISOString().split("T")[0]}))}},[t.paymentTerms,t.billDate]),o.useEffect(()=>{t.paymentTerms==="due on receipt"&&t.dueDate!==t.billDate&&c(s=>({...s,paymentTerms:"Custom"}))},[t.dueDate,t.paymentTerms,t.billDate]);const pe=()=>{const{roundOffAmount:s=0,otherExpenseAmount:a=0,freightAmount:l=0,itemTotalDiscount:n=0,totalTaxAmount:r=0,subTotal:u=0}=t;return(Number(u)+Number(a)+Number(r)+Number(l)-(Number(n)+Number(s))).toFixed(2)};o.useEffect(()=>{const{grandTotal:s,paidAmount:a}=t,l=Number(s)||0,n=Number(a)||0;let r;console.log(a,"paidAmount"),console.log(s,"grandTotal"),r=Math.round((l-n)*100)/100,console.log(r,"balanceAmount"),c(u=>({...u,balanceAmount:r}))},[t.grandTotal,t.paidAmount,t.paymentTerms]),console.log(t);const xe=async()=>{const s={...W},a=[];if(t.supplierId.trim()===""?(s.supplierId=!0,a.push("Supplier ID")):s.supplierId=!1,t.destinationOfSupply.trim()===""?(s.destinationOfSupply=!0,a.push("Destination of Supply")):s.destinationOfSupply=!1,t.sourceOfSupply.trim()===""?(s.sourceOfSupply=!0,a.push("Source of Supply")):s.sourceOfSupply=!1,t.billDate.trim()===""?(s.billDate=!0,a.push("Bill Date")):s.billDate=!1,Object.values(s).some(l=>l)){Z(s),f.error(`Please fill the required fields: ${a.join(", ")}`);return}try{let l,n;g==="edit"?(l=`${m.EDIT_BILL}/${I}`,n=le):(l=`${m.ADD_BILL}`,n=ee);const{response:r,error:u}=await n(l,t);!u&&r?(f.success(r.data.message),setTimeout(()=>{re("/purchase/bills")},1e3)):f.error(u==null?void 0:u.response.data.message)}catch(l){console.error("Save error",l)}};o.useEffect(()=>{const s=pe(),{transactionDiscountType:a,transactionDiscount:l="",transactionDiscountAmount:n=0}=t,r=a==="percentage"?Number(l)/100*Number(s):Number(l),u=Math.round(r*100)/100,j=Math.round((Number(s)-u)*100)/100;(n!==u||t.grandTotal!==j)&&c(L=>({...L,transactionDiscountAmount:u,grandTotal:j}))},[t.transactionDiscount,t.transactionDiscountType,t.subTotal,t.otherExpenseAmount,t.totalTaxAmount,t.freightAmount,t.itemTotalDiscount,t.roundOffAmount]),o.useEffect(()=>{(t==null?void 0:t.destinationOfSupply)==""?T(!1):(t==null?void 0:t.sourceOfSupply)!==(t==null?void 0:t.destinationOfSupply)?T(!0):T(!1)},[t==null?void 0:t.sourceOfSupply,t==null?void 0:t.destinationOfSupply]);const he=async()=>{try{const s=`${m.GET_ONE_PURCHASE_ORDER}/${ie}`,{response:a,error:l}=await te(s);if(!l&&a){console.log(a.data,"response"),c(r=>({...r,...a.data,orderNumber:a.data.purchaseOrder,purchaseOrderId:a.data._id}));const n=N.find(r=>r._id===a.data.supplierId);n&&C(n)}}catch(s){console.log("Error in fetching bill",s)}};return o.useEffect(()=>{const s=`${m.GET_ALL_SUPPLIER}`,a=`${m.GET_ONE_ORGANIZATION}`,l=`${m.Get_ALL_Acounts}`,n=`${m.GET_LAST_BILL_PREFIX}`;b(s,S,O),b(a,q,J),b(l,Y,se),b(n,H,ae)},[]),o.useEffect(()=>{he(),ue(),de(),me()},[i,p]),o.useEffect(()=>{E&&g!=="edit"&&c(s=>({...s,billNumber:E}))},[E]),o.useEffect(()=>{(async()=>{const a=`${m.GET_ALL_SUPPLIER}`,l=`${m.GET_A_BILL}/${I}`;await b(a,S,O),g==="edit"&&await b(l,c,ne)})()},[g,I]),o.useEffect(()=>{c(s=>({...s,totalDiscount:(parseFloat(s.totalItemDiscount)||0)+(parseFloat(s.transactionDiscountAmount)||0)}))},[t.transactionDiscountAmount]),o.useEffect(()=>{if(t&&N){const{supplierId:s}=t;if(s){const a=N.find(l=>l._id===s);a&&C(a)}}},[t,N]),o.useEffect(()=>(y!==null?document.addEventListener("mousedown",B):document.removeEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}),[y]),o.useEffect(()=>{t.paymentTerms!=="Cash"&&c(s=>({...s,paidAmount:"",paidAccountId:""}))},[t.paymentTerms]),e.jsxs("div",{className:"mx-5 my-4 text-sm",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsx(je,{to:"/purchase/bills",children:e.jsx("div",{className:"flex justify-center items-center h-11 w-11 bg-tertiary_main rounded-full",children:e.jsx(ge,{})})}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("h4",{className:"font-bold text-xl text-textColor ",children:"Bills"})})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-4 py-5",children:[e.jsxs("div",{className:"bg-secondary_main p-5 min-h-max rounded-xl relative col-span-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-5 space-y-1",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Supplier Name",e.jsx("span",{className:"text-[#bd2e2e] ",children:"*"})]}),e.jsxs("div",{className:"relative w-full",onClick:()=>ce("supplier"),children:[e.jsx("div",{className:"items-center flex appearance-none w-full h-9 text-zinc-400 bg-white border border-inputBorder text-sm pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:e.jsx("p",{children:p&&p.supplierDisplayName?p.supplierDisplayName:"Select Supplier"})}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(h,{color:"gray"})})]}),y==="supplier"&&e.jsxs("div",{ref:D,className:"absolute z-10 bg-white  shadow  rounded-md mt-1 p-2 w-[30%] space-y-1 max-h-72 overflow-y-auto  hide-scrollbar",children:[e.jsx(ye,{searchValue:_,onSearchChange:U,placeholder:"Serach Supplier"}),G.length>0?G.map(s=>e.jsxs("div",{className:"grid grid-cols-12 gap-1 p-2 hover:bg-gray-100 cursor-pointe border border-slate-400 rounded-lg bg-lightPink cursor-pointer hover:bg-lightRose",children:[e.jsx("div",{className:"col-span-2 flex items-center justify-center",children:e.jsx("img",{className:"rounded-full ",src:s.supplierProfile?s.supplierProfile:"https://i.postimg.cc/sDnbrRWP/avatar-3814049-1280.webp",alt:""})}),e.jsx("div",{className:"col-span-10 flex cursor-pointer ",onClick:()=>{c(a=>({...a,supplierId:s._id})),w(null),C(s)},children:e.jsxs("div",{className:` items-center space-y-1 ${s.mobile?"justify-start":"flex justify-center"}`,children:[e.jsx("p",{className:"font-bold text-sm",children:s.supplierDisplayName}),s.mobile&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Phone: ",s.mobile]})]})})]})):e.jsx("div",{className:"text-center border-slate-400 border rounded-lg",children:e.jsx("p",{className:"text-[red] text-sm py-4",children:"Supplier Not Found!"})}),e.jsx("div",{className:"hover:bg-gray-100 cursor-pointer border border-slate-400 rounded-lg py-4",children:e.jsx(ve,{page:"purchase"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"relative w-full",children:e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Supplier Invoice Number"," ",e.jsx("span",{className:"text-[#bd2e2e] -ms-0.5",children:"*"}),e.jsx("input",{id:"supplierInvoiceNum",onChange:d,name:"supplierInvoiceNum",value:t.supplierInvoiceNum,placeholder:"Enter Invoice Number",className:" block  appearance-none w-full h-9  text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500 "})]})}),e.jsx("div",{className:"relative w-full",children:e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Bill Number ",e.jsx("span",{className:"text-[#bd2e2e] -ms-0.5",children:"*"}),e.jsx("input",{disabled:!0,id:"billNumber",onChange:d,name:"billNumber",value:t.billNumber,placeholder:"Enter Bill Number",className:" block  appearance-none w-full h-9  text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500 "})]})})]}),t.supplierId&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Destination Of Supply",e.jsx("span",{className:"text-[#bd2e2e] ",children:"*"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsxs("select",{onChange:d,name:"destinationOfSupply",value:t.destinationOfSupply,className:"block appearance-none w-full h-9  text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Source Of Supply"}),R&&R.map((s,a)=>e.jsx("option",{value:s,className:"text-gray",children:s},a))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(h,{color:"gray"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Source of Supply",e.jsx("span",{className:"text-[#bd2e2e] ",children:"*"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsxs("select",{onChange:d,name:"sourceOfSupply",value:t.sourceOfSupply,className:"block appearance-none w-full h-9  text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Source Of Supply"}),M&&M.map((s,a)=>e.jsx("option",{value:s,className:"text-gray",children:s},a))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(h,{color:"gray"})})]})]})]}),e.jsx("div",{className:" w-full",children:e.jsxs("label",{className:"block text-sm  text-labelColor",children:["Order Number",e.jsx("input",{name:"orderNumber",id:"orderNumber",value:t.orderNumber,onChange:d,placeholder:"Enter Order Number",className:"border-inputBorder w-full text-sm border rounded text-dropdownText  mt-1 p-2 h-9 "})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Purchase Order Date"}),e.jsx("input",{type:"date",value:t.purchaseOrderDate,name:"purchaseOrderDate",onChange:d,className:"border-inputBorder w-full text-sm border rounded p-2 h-9  text-zinc-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Expected Shipment Date"}),e.jsx("input",{type:"date",value:t.expectedShipmentDate,name:"expectedShipmentDate",onChange:d,className:"border-inputBorder w-full text-sm border rounded p-2 h-9  text-zinc-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor",children:"Shipment Preference"}),e.jsxs("div",{className:"relative w-full",children:[e.jsxs("select",{value:t.shipmentPreference,name:"shipmentPreference",onChange:d,className:"block appearance-none w-full h-9  text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[e.jsx("option",{value:"",className:"text-gray",children:"Select Shipment Preference"}),e.jsx("option",{value:"Road",className:"text-gray",children:"Road"}),e.jsx("option",{value:"Rail",className:"text-gray",children:"Rail"}),e.jsx("option",{value:"Air",className:"text-gray",children:"Air"})," ",e.jsx("option",{value:"Sea",className:"text-gray",children:"Sea"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(h,{color:"gray"})})]})]}),e.jsx("div",{className:" w-full",children:e.jsxs("label",{className:"block text-sm text-labelColor",children:["Bill Date ",e.jsx("span",{className:"text-[#bd2e2e] -ms-0.5",children:"*"}),e.jsx("input",{name:"billDate",id:"billDate",type:"date",value:t.billDate,onChange:d,className:"border-inputBorder w-full text-sm border rounded text-dropdownText p-2 h-9 mt-1"})]})}),e.jsx("div",{children:e.jsx("div",{children:e.jsxs("label",{className:"block text-sm text-labelColor",children:["Due Date ",e.jsx("span",{className:"text-[#bd2e2e] -ms-0.5",children:"*"}),e.jsx("input",{name:"dueDate",id:"dueDate",value:t.dueDate,onChange:d,type:"date",disabled:t.paymentTerms!=="due on receipt"&&t.paymentTerms!=="Custom",className:"border-inputBorder w-full text-sm border rounded text-dropdownText  p-2 h-9 mt-1 "})]})})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-labelColor",children:"Payment Terms"}),e.jsxs("div",{className:"relative w-full mt-1",children:[e.jsxs("select",{value:t.paymentTerms,onChange:d,name:"paymentTerms",className:"block appearance-none w-full h-9  text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[e.jsx("option",{value:"",className:"text-gray",children:"Select Payment Terms"}),e.jsx("option",{value:"Net 15",children:"Net 15"}),e.jsx("option",{value:"Net 30",children:"Net 30"}),e.jsx("option",{value:"Net 45",children:"Net 45"}),e.jsx("option",{value:"Net 60",children:"Net 60"}),e.jsx("option",{value:"Pay Now",children:"Pay Now"}),e.jsx("option",{value:"due on receipt",children:"Due on Receipt"}),e.jsx("option",{value:"End of This Month",children:"End of This Month"}),e.jsx("option",{value:"End of Next Month",children:"End of Next Month"}),e.jsx("option",{value:"Custom",children:"Custom"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(h,{color:"gray"})})]})]}),e.jsxs("div",{className:" w-full",children:[e.jsxs("label",{className:"block text-sm  text-labelColor",children:["Payment Mode"," "]}),e.jsxs("div",{className:"relative w-full",children:[e.jsxs("select",{value:t.paymentMode,name:"paymentMode",onChange:d,className:"block appearance-none mt-1 w-full h-9  text-zinc-400 bg-white border border-inputBorder text-sm  pl-2 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[e.jsx("option",{value:"",className:"text-gray",children:"Select Payment Mode"}),e.jsx("option",{value:"Cash",className:"text-gray",children:"Cash"}),e.jsx("option",{value:"Credit",className:"text-gray",children:"Credit"})," "]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(h,{color:"gray"})})]})]})]}),e.jsxs("div",{className:"mt-9",children:[e.jsx("p",{className:"font-bold text-base",children:"Add Item"}),e.jsx(Se,{purchaseOrderState:t,setPurchaseOrderState:c,isInterState:A,oneOrganization:i})]}),e.jsx(Ce,{page:"bill",purchaseOrderState:t,setPurchaseOrderState:c,allAccounts:v}),e.jsx("br",{})]}),e.jsx("div",{className:"col-span-4",children:e.jsxs("div",{className:"bg-secondary_main p-5 min-h-max rounded-xl relative  mt-0",children:[e.jsx("div",{className:"mt-5",children:e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Add Note",e.jsx("input",{name:"addNotes",id:"addNotes",value:t.addNotes,onChange:d,placeholder:"Note",className:"border-inputBorder w-full text-sm border rounded  p-2 h-[57px] mt-2 "})]})}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Terms & Conditions",e.jsx("input",{name:"termsAndConditions",id:"termsAndConditions",value:t.termsAndConditions,onChange:d,placeholder:"Add Terms & Conditions of your business",className:"border-inputBorder w-full text-sm border rounded p-2 h-[57px] mt-2"})]})}),e.jsx("div",{className:"text-sm mt-3",children:e.jsxs("label",{className:"block text-sm mb-1 text-labelColor",children:["Attach files to the Debit Notes",e.jsxs("div",{className:"border-inputBorder text-textColor border-gray-800 w-full border-dashed border p-2 rounded flex flex-col gap-2 justify-center items-center bg-white mb-4 mt-2",children:[e.jsxs("span",{className:"text-center inline-flex items-center gap-2",children:[e.jsx(we,{}),"Upload File"]}),e.jsx("div",{className:"text-center",children:"Maximum File Size: 1 MB"})]}),e.jsx("p",{className:"text-xs mt-1 text-gray-600"}),e.jsx("input",{type:"file",className:"hidden",value:"",name:"documents"})]})}),e.jsxs("div",{className:" pb-4  text-dropdownText border-b-2 border-slate-200 space-y-2",children:[e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:"Sub Total"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[i==null?void 0:i.baseCurrency," ",t.subTotal?t.subTotal:"0.00"," "]})]})]}),e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:" Total Quantity"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsx("p",{className:"text-end",children:t.totalItem?t.totalItem:"0"})]})]}),e.jsxs("div",{className:"flex ",children:[e.jsx("div",{className:"w-[75%]",children:e.jsx("p",{children:" Total Item Discount"})}),e.jsx("div",{className:"w-full text-end",children:e.jsxs("p",{className:"text-end",children:[i.baseCurrency," ",t.itemTotalDiscount?t.itemTotalDiscount:"0.00"]})})]}),e.jsx("div",{children:A?e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:" IGST"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[i.baseCurrency," ",t.igst?t.igst:"0.00"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:" SGST"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[i.baseCurrency," ",t.sgst?t.sgst:"0.00"]})]})]}),e.jsxs("div",{className:"flex mt-2",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:" CGST"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[i.baseCurrency," ",t.cgst?t.cgst:"0.00"]})]})]})]})}),!A&&e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:" Total Tax"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[" ",i.baseCurrency," ",t.totalTaxAmount]})]})]}),e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:"Other Expense"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[i==null?void 0:i.baseCurrency," ",t.otherExpenseAmount?t.otherExpenseAmount:"0.00"]})]})]}),e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:"Fright"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[i==null?void 0:i.baseCurrency," ",t.freightAmount?t.freightAmount:"0.00"]})]})]}),e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[75%]",children:[" ",e.jsx("p",{children:"Rount Off Amount"})]}),e.jsxs("div",{className:"w-full text-end",children:[" ",e.jsxs("p",{className:"text-end",children:[i.baseCurrency," ",t.roundOffAmount?t.roundOffAmount:"0.00"]})]})]}),e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"w-[150%]",children:[" ",e.jsx("p",{children:"Bill Discount"}),e.jsx("div",{className:""})]}),e.jsx("div",{className:" ",children:e.jsxs("div",{className:"border border-inputBorder rounded-lg flex items-center justify-center p-1 gap-1",children:[e.jsx("input",{value:t.transactionDiscount,onChange:d,step:"0.01",name:"transactionDiscount",type:"text",placeholder:"0",className:"w-[30px]  focus:outline-none text-center"}),e.jsxs("select",{className:"text-xs   text-zinc-400 bg-white relative",value:t.transactionDiscountType,onChange:d,name:"transactionDiscountType",children:[e.jsx("option",{value:"percentage",children:"%"}),e.jsx("option",{value:"currency",children:i.baseCurrency})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center  text-gray-700 ms-1",children:e.jsx(h,{color:"gray",height:15,width:15})})]})}),e.jsxs("div",{className:"w-full text-end ",children:[" ",e.jsx("p",{className:"text-end",children:e.jsxs("p",{className:"text-end",children:[i.baseCurrency," ",t.transactionDiscountAmount?t.transactionDiscountAmount:"0.00"]})})]})]})]}),e.jsxs("div",{className:"flex text-black my-4",children:[e.jsxs("div",{className:"w-[75%] font-bold",children:[" ",e.jsx("p",{children:"Total"})]}),e.jsxs("div",{className:"w-full text-end font-bold text-base",children:[" ",e.jsxs("p",{className:"text-end",children:[" ",i.baseCurrency," ",t.grandTotal?t.grandTotal:"0.00"]})]})]}),t.paymentMode==="Cash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-4 items-center justify-center mb-2",children:[e.jsx("label",{className:" text-sm mb-1 text-labelColor min-w-fit left-0",children:"Paid Through Account"}),e.jsxs("div",{className:"relative w-full  ml-auto  ps-5",children:[e.jsxs("select",{onChange:d,value:t.paidAccountId,name:"paidAccountId",className:"block appearance-none w-full  text-[#495160] bg-white border border-inputBorder text-sm h-[39px] pl-3 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-darkRed",children:[e.jsx("option",{value:"",selected:!0,hidden:!0,disabled:!0,children:"Select Account"}),(z=v==null?void 0:v.filter(s=>s.accountSubhead==="Bank"||s.accountSubhead==="Cash"))==null?void 0:z.map(s=>e.jsx("option",{value:s._id,children:s.accountName},s._id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(h,{color:"gray"})})]})]}),e.jsxs("div",{className:"flex gap-4 items-center justify-center",children:[e.jsx("label",{className:"block text-sm mb-1 text-labelColor max-w-fit",htmlFor:"paidAmount",children:"Paid Amount"}),e.jsx("div",{className:"ml-auto",children:e.jsx("input",{className:"border-inputBorder w-full text-sm border rounded-lg p-1.5 pl-2 h-9",type:"text",placeholder:"Enter paid amount",name:"paidAmount",value:t.paidAmount===0?"":t.paidAmount,onChange:s=>{const{value:a}=s.target;/^\d*\.?\d*$/.test(a)&&d(s)}})})]}),e.jsxs("div",{className:" flex gap-4 items-center justify-center",children:[e.jsx("label",{htmlFor:"balanceAmount",className:"block text-sm mb-1 text-labelColor max-w-fit",children:"Balance Amount"}),e.jsx("div",{className:"ml-auto",children:e.jsx("input",{disabled:!0,name:"balanceAmount",id:"balanceAmount",value:t.balanceAmount,onChange:d,placeholder:"Balance Amount",className:"border-inputBorder bg-white  text-sm border rounded-lg text-dropdownText  p-2 h-9 mt-2 "})})]})]}),e.jsxs("div",{className:"flex gap-4 m-5 justify-end",children:[" ",e.jsx(k,{variant:"secondary",size:"sm",children:"Cancel"}),e.jsxs(k,{variant:"secondary",size:"sm",children:[e.jsx(De,{height:18,width:18,color:"currentColor"}),"Print"]}),e.jsx(k,{variant:"primary",size:"sm",onClick:xe,children:"Save & send"})," "]})]})})]}),e.jsx("div",{})]})};export{Pe as default};
